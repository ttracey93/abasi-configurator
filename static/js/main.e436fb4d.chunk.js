(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{19:function(e){e.exports={"body-style":{label:"Body Style",icon:"shape",collectionId:"Z2lkOi8vc2hvcGlmeS9Db2xsZWN0aW9uLzM1MTAzMDE0OTc4",key:"body-style"},body:{label:"Body",icon:"body",collections:{wood:{label:"Wood",icon:"",collectionId:"Z2lkOi8vc2hvcGlmeS9Db2xsZWN0aW9uLzM2MzIxMDM0MzA2",key:"body-wood"},"top-wood":{label:"Top Wood",icon:"",collectionId:"Z2lkOi8vc2hvcGlmeS9Db2xsZWN0aW9uLzM2MzIxMzI5MjE4",key:"top-wood"},finish:{label:"Finish",icon:"",collectionId:"Z2lkOi8vc2hvcGlmeS9Db2xsZWN0aW9uLzM2MzIyNjM5OTM4",key:"finish"}}},neck:{label:"Neck",icon:"headstock",collections:{wood:{label:"Wood",icon:"",collectionId:"Z2lkOi8vc2hvcGlmeS9Db2xsZWN0aW9uLzM2MzIxNTU4NTk0",key:"neck-wood"},fingerboard:{label:"Material",icon:"",collectionId:"Z2lkOi8vc2hvcGlmeS9Db2xsZWN0aW9uLzM2MzIxODIwNzM4",key:"fingerboard"}}},hardware:{label:"Hardware",icon:"shape2",collections:{color:{label:"Color",icon:"",collectionId:"Z2lkOi8vc2hvcGlmeS9Db2xsZWN0aW9uLzM2MzIyMTE1NjUw",key:"hardware-color"},fretwire:{label:"Frets",icon:"",collectionId:"Z2lkOi8vc2hvcGlmeS9Db2xsZWN0aW9uLzM2MzIyMzc3Nzk0",key:"fretwire"}}}}},20:function(e,t,n){e.exports=n(31)},25:function(e,t,n){},29:function(e,t,n){},31:function(e,t,n){"use strict";n.r(t);var a=n(0),i=n.n(a),o=n(14),s=n.n(o),r=(n(25),n(7)),c=n.n(r),l=n(15),d=n(10),h=n(8),u=n(2),m=n(3),p=n(5),b=n(4),g=n(6),v=n(1),f=n(11),k=n.n(f),O=6,M="Standard",y="Headstock",j={HOME:"Home",OPTION:"Option",CONFIRMATION:"Confirmation"},w=(n(29),i.a.Component,function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(b.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(v.a)(Object(v.a)(n))),n.changeMode=n.changeMode.bind(Object(v.a)(Object(v.a)(n))),n.rotate=n.rotate.bind(Object(v.a)(Object(v.a)(n))),n.switchModels=n.switchModels.bind(Object(v.a)(Object(v.a)(n))),n}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleChange",value:function(e){this.props.setData(e)}},{key:"changeMode",value:function(e){this.props.changeMode(e)}},{key:"rotate",value:function(){console.log("rotated")}},{key:"mountRenderer",value:function(e){this.containerRef.appendChild(e)}},{key:"switchModels",value:function(){console.log("Switching models!")}},{key:"render",value:function(){var e=Object.assign({},this.props.data),t=this.props.itemIndex>0;return delete e.items,i.a.createElement("div",{className:"container evenly viewport"},i.a.createElement("div",{id:"renderer-container",className:"viewport-view"}),t&&i.a.createElement("div",{className:"back-button"},i.a.createElement("button",{className:"btn",onClick:this.props.goBack},"Back")),this.props.reset&&i.a.createElement("div",{className:"reset-button"},i.a.createElement("button",{className:"btn",onClick:this.props.reset},"Reset")),i.a.createElement("div",{className:"rotate-button"},i.a.createElement("button",{className:"btn",onClick:this.switchModels},"Switch Models")))}}]),t}(i.a.Component)),x=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(b.a)(t).call(this,e))).handleClick=n.handleClick.bind(Object(v.a)(Object(v.a)(n))),n}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleClick",value:function(){this.props.callback(this.props.data)}},{key:"render",value:function(){var e=this.props.data.label||this.props.data.title,t=this.props.data.icon,n=t?"icons/".concat(t,".svg"):"icons/headstock.svg";return i.a.createElement("div",{className:"container columns evenly tile",role:"presentation",onClick:this.handleClick},i.a.createElement("div",{className:"tile-label"},e),i.a.createElement("div",{className:"tile-icon"},this.props.imageSource&&i.a.createElement("img",{src:this.props.imageSource.src,alt:"Texture Preview"}),!this.props.imageSource&&i.a.createElement("img",{className:"icon-image",src:n,alt:"Configurator Icon"})),this.props.data.variants&&i.a.createElement("div",{className:"tile-price"},"$",this.props.data.variants[0].price," USD"))}}]),t}(i.a.Component),C=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(b.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(v.a)(Object(v.a)(n))),n.changeMode=n.changeMode.bind(Object(v.a)(Object(v.a)(n))),n}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleChange",value:function(e){this.props.setData(e,this.props.items.key)}},{key:"changeMode",value:function(e){this.props.changeMode(e)}},{key:"render",value:function(){var e=this,t=this.props.items,n=k.a.map(t.products||t,function(t,n){var a=t.handle?e.props.renderer.getTextureImage(t.handle):void 0;return i.a.createElement(x,{key:n,data:t,callback:e.handleChange,imageSource:a})}),a=this.props.columns?"menu columns":"menu";return i.a.createElement("div",{className:a},n)}}]),t}(i.a.Component);C.defaultProps={columns:!1};var E=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(b.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(v.a)(Object(v.a)(n))),n.changeMode=n.changeMode.bind(Object(v.a)(Object(v.a)(n))),n}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleChange",value:function(e,t){this.props.setData(e,t)}},{key:"changeMode",value:function(e){this.props.changeMode(e)}},{key:"render",value:function(){return i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"container home-menu"}),i.a.createElement("div",{className:"container home-viewport"},i.a.createElement(w,{data:this.props.data,setData:this.handleChange,changeMode:this.changeMode,reset:this.props.reset,itemIndex:this.props.itemIndex,goBack:this.props.goBack})))}}]),t}(i.a.Component),I=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(b.a)(t).call(this,e))).state={something:void 0},n}return Object(g.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return this.state.something||"Info pane"}}]),t}(i.a.Component),N=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(p.a)(this,Object(b.a)(t).call(this,e))).handleChange=n.handleChange.bind(Object(v.a)(Object(v.a)(n))),n.changeMode=n.changeMode.bind(Object(v.a)(Object(v.a)(n))),n}return Object(g.a)(t,e),Object(m.a)(t,[{key:"handleChange",value:function(e,t){this.props.setData(e,t)}},{key:"changeMode",value:function(e){this.props.changeMode(e)}},{key:"render",value:function(){return i.a.createElement("div",{className:"container"},i.a.createElement("div",{className:"container option-menu"},i.a.createElement("div",{className:"back-button"},i.a.createElement("button",{className:"btn",onClick:this.props.goBack},"Back")),i.a.createElement(C,{items:this.props.getItems(),setData:this.handleChange,changeMode:this.changeMode,columns:!0})),i.a.createElement("div",{className:"container columns"},i.a.createElement("div",{className:"container option-viewport"},i.a.createElement(w,{data:this.props.data,setData:this.handleChange,changeMode:this.changeMode})),i.a.createElement("div",{className:"container option-info"},i.a.createElement(I,{data:this.props.data,setData:this.handleChange,changeMode:this.changeMode}))))}}]),t}(i.a.Component),T=n(16),W=n.n(T),z=n(17),D=n.n(z),L=n(18),S=n.n(L),F=n(9),B=function(){function e(t){Object(u.a)(this,e),this.TEXTURE_ANISOTROPY=16,this.data=t,this.animate=this.animate.bind(this),this.resize=this.resize.bind(this),this.renderer=new F.WebGLRenderer,this.container=void 0,this.loader=new W.a(this.loadingManager),this.textureLoader=new F.TextureLoader,this.textures={"mahogany-body":this.loadTexture("scenes/textures/mahogany.jpg"),"walnut-body":this.loadTexture("scenes/textures/sapele.jpg"),"swamp-ash-body":this.loadTexture("scenes/textures/spruce.jpg"),"west-red-cedar-body":this.loadTexture("scenes/textures/flamedMaple.jpg"),"poplar-body":this.loadTexture("scenes/textures/quiltedMaple.jpg"),"wenge-body":this.loadTexture("scenes/textures/mahogany.jpg")},this.currentTexture=this.textures["mahogany-body"];this.reflectionCube=(new F.CubeTextureLoader).load(["scenes/reflection/0001.png","scenes/reflection/0002.png","scenes/reflection/0003.png","scenes/reflection/0004.png","scenes/reflection/0005.png","scenes/reflection/0006.png"]),this.material=new F.MeshPhongMaterial({shininess:40,map:this.textures["mahogany-body"],envMap:this.reflectionCube,combine:F.MixOperation,reflectivity:.12}),this.models={}}return Object(m.a)(e,[{key:"getRendererElement",value:function(){return this.renderer.domElement}},{key:"update",value:function(e){var t=e["body-style"],n=e["body-wood"];t&&(this.scene.remove(this.models.fretboard),this.scene.remove(this.models.fannedFretboard),this.scene.remove(this.models.frets),this.scene.remove(this.models.fretsFanned),this.scene.remove(this.models.neck),this.scene.remove(this.models.neckFanned),this.currentFretboardModel=t.includes("multi")?this.models.fannedFretboard:this.models.fretboard,this.currentFretsModel=t.includes("multi")?this.models.fretsFanned:this.models.frets,this.currentNeckModel=t.includes("multi")?this.models.neckFanned:this.models.neck,this.scene.add(this.currentFretboardModel),this.scene.add(this.currentNeckModel),this.scene.add(this.currentFretsModel)),this.currentTexture=this.textures[n]||this.currentTexture,this.setModel(this.models[t]||this.models.archtop)}},{key:"createScene",value:function(){var e=Object(d.a)(c.a.mark(function e(){var t=this;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.scene=new F.Scene,this.scene.background=new F.Color(4605510),this.camera=new F.PerspectiveCamera(75,this.container.clientWidth/this.container.clientHeight,.1,1e3),this.camera.position.set(0,-80,0),this.controls=new S.a(this.camera,this.renderer.domElement),this.ambientLight=new F.AmbientLight(13421772,.5),this.scene.add(this.ambientLight),this.directionalLight=new F.DirectionalLight(16777215,.8),this.directionalLight.position.set(1,1,0).normalize(),this.scene.add(this.directionalLight),this.loader.load("scenes/models/archtop.dae",function(e){t.models.archtop=e.scene,t.models["6-string-standard-scale"]=t.models.archtop,t.models["6-string-multi-scale"]=t.models.archtop,t.setModel(t.models.archtop),t.update(t.data),t.animate()}),this.loadModel("new/bass/original/source/BassGuitar.FBX",function(e){console.log("Got bass model"),console.log(e),t.scene.add(e)}),window.addEventListener("resize",this.resize,!1);case 14:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"loadModel",value:function(e,t){console.log("Loading model...",e),(new D.a).load(e,t)}},{key:"loadTexture",value:function(e){console.log("Loading texture...",e);var t=this.textureLoader.load(e);return t.anisotropy=this.renderer.capabilities.getMaxAnisotropy(),t.wrapS=F.ClampToEdgeWrapping,t.wrapT=F.ClampToEdgeWrapping,t.minFilter=F.LinearMipMapLinearFilter,t.magFilter=F.LinearMipMapLinearFilter,t}},{key:"resize",value:function(){this.camera.aspect=this.container.clientWidth/this.container.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight)}},{key:"setModel",value:function(e){var t=this;this.scene.remove(this.currentModel),e.traverse(function(e){e.isMesh&&(e.material.map=t.currentTexture)}),this.currentModel=e,this.scene.add(e)}},{key:"animate",value:function(){this.directionalLight.position.copy(this.camera.position),requestAnimationFrame(this.animate),this.controls.update(),this.renderScene()}},{key:"renderScene",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(){this.paused=!1,this.animate()}}]),e}(),Z=n(19),R=function(e){function t(e){var n,a;return Object(u.a)(this,t),(a=Object(p.a)(this,Object(b.a)(t).call(this,e))).state={data:t.getInitialData(),items:[Z],itemIndex:0,mode:j.HOME},a.setData=a.setData.bind(Object(v.a)(Object(v.a)(a))),a.getItems=a.getItems.bind(Object(v.a)(Object(v.a)(a))),a.changeMode=a.changeMode.bind(Object(v.a)(Object(v.a)(a))),a.reset=a.reset.bind(Object(v.a)(Object(v.a)(a))),a.goBack=a.goBack.bind(Object(v.a)(Object(v.a)(a))),a.components=(n={},Object(h.a)(n,j.HOME,E),Object(h.a)(n,j.OPTION,N),n),a.renderer=new B(a.state.data),a}return Object(g.a)(t,e),Object(m.a)(t,[{key:"componentWillMount",value:function(){}},{key:"componentDidMount",value:function(){this.rendererContainer=document.getElementById("renderer-container"),this.renderer.container=this.rendererContainer,this.renderer.scene||this.renderer.createScene(),this.rendererContainer.appendChild(this.renderer.getRendererElement())}},{key:"componentDidUpdate",value:function(){this.state.mode!==j.CONFIRMATION&&(this.rendererContainer=document.getElementById("renderer-container"),this.renderer.container=this.rendererContainer,this.renderer.resize(),this.renderer.update(this.state.data),this.rendererContainer.appendChild(this.renderer.getRendererElement()))}},{key:"setData",value:function(){var e=Object(d.a)(c.a.mark(function e(t,n){var a;return c.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.collectionId&&!t.collections){e.next=6;break}this.state.items.push(t.collections||t),this.state.itemIndex+=1,this.propogateItems(),e.next=13;break;case 6:if(n){e.next=8;break}throw new Error("No item key supplied!");case 8:(a=Object(l.a)({},this.state.data))[n]=t.handle,this.state.data=a,this.setState({data:a}),this.updateCart();case 13:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}()},{key:"getItems",value:function(){return this.state.items[this.state.itemIndex]}},{key:"goBack",value:function(){if(this.state.itemIndex>0){var e=this.state.itemIndex-1;this.state.items.pop(),this.setState({itemIndex:e})}}},{key:"reset",value:function(){}},{key:"changeMode",value:function(e){this.setState({mode:e})}},{key:"render",value:function(){var e=this.components[this.state.mode];if(!e)throw new Error("Component missing for mode ".concat(this.state.mode));return i.a.createElement("div",{className:"configurator"},this.getItems()&&i.a.createElement(e,{data:this.state.data,setData:this.setData,getItems:this.getItems,changeMode:this.changeMode,reset:this.reset,itemIndex:this.state.itemIndex,goBack:this.goBack,renderer:this.renderer}))}}],[{key:"getInitialData",value:function(){return{strings:O,scale:M,headstyle:y,price:"0.00"}}}]),t}(i.a.Component),G=function(){return i.a.createElement(R,null)},H=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function A(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}s.a.render(i.a.createElement(G,null),document.getElementById("root")),function(){if("serviceWorker"in navigator){if(new URL("/abasi-configurator",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/abasi-configurator","/service-worker.js");H?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):A(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):A(e)})}}()}},[[20,1,2]]]);
//# sourceMappingURL=main.e436fb4d.chunk.js.map