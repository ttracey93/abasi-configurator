(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{131:function(e,t,a){},143:function(e,t,a){e.exports=a(315)},155:function(e){e.exports={}},315:function(e,t,a){"use strict";a.r(t);var n={};a.r(n),a.d(n,"initUser",function(){return ce}),a.d(n,"login",function(){return oe}),a.d(n,"logout",function(){return le});var r=a(0),s=a.n(r),i=a(47),c=a(39),o=a(43),l=a(133),u=a(13),d=Object(o.c)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER":case"LOGIN":return localStorage.setItem("user",JSON.stringify(t.payload)),t.payload;case"LOGOUT":return localStorage.setItem("user",null),window.location.reload(),null;default:return e}},searchValue:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return(arguments.length>1?arguments[1]:void 0).type,e}}),m=a(76),h=a(3),p=a.n(h),f=a(6),b=a(20),v=a(7),g=a(8),E=a(10),O=a(9),k=a(11),y=a(2),j=a(12),N=a.n(j),C={HOME:"Home",OPTION:"Option",PAYMENT:"Payment",CONFIRMATION:"Confirmation"},x=(a(155),a(97)),w=a.n(x),M=a(77),S=a.n(M),I=a(134),L=a.n(I),T="Color",D=a(59);S()(D);var A=function(){function e(){Object(v.a)(this,e)}return Object(g.a)(e,null,[{key:"envMap",value:function(){var e=["/px.jpg","/nx.jpg","/py.jpg","/ny.jpg","/pz.jpg","/nz.jpg"];return(new D.CubeTextureLoader).load(e)}},{key:"metalWithColor",value:function(e,t){return new D.MeshStandardMaterial({color:t,roughness:.4,metalness:.8,envMap:e,aoMapIntensity:1,envMapIntensity:1,displacementScale:2.436143,normalScale:1,flatShading:!1})}},{key:"withColor",value:function(e,t){return new D.MeshStandardMaterial({color:t,roughness:.8,metalness:0,flatShading:!1})}}]),e}(),P=a(135),B=a.n(P),U=a(59);S()(U);var F=function(){function e(t){Object(v.a)(this,e),U.Cache.enabled=!0,this.TEXTURE_ANISOTROPY=16,this.data=t,this.animate=this.animate.bind(this),this.resize=this.resize.bind(this),this.prepareModel=this.prepareModel.bind(this),this.handleEvent=this.handleEvent.bind(this),this.colorChange=this.colorChange.bind(this),this.createScene=this.createScene.bind(this),this.renderer=new U.WebGLRenderer({alpha:!0}),this.renderer.setClearColor(16777215,0),this.container=void 0,this.textureLoader=new U.TextureLoader,this.colors={orange:new U.MeshPhysicalMaterial({color:16025922,metalness:.9,roughness:.2,name:"orange"}),red:new U.MeshPhysicalMaterial({color:15010607,metalness:.9,roughness:.2,name:"red"}),purple:new U.MeshPhysicalMaterial({color:8653237,metalness:.9,roughness:.2,name:"purple"}),white:new U.MeshPhysicalMaterial({color:16777215,metalness:.9,roughness:.2,name:"purple"})},this.models={},this.materials={};var a=A.envMap();this.metalMaterial=A.metalWithColor(a,14078413),this.darkMetalMaterial=A.metalWithColor(a,2236962),this.blackMetalMaterial=A.metalWithColor(a,0),this.brownMaterial=A.withColor(a,10842422),this.whiteMaterial=A.withColor(a,16777215)}return Object(g.a)(e,[{key:"getRendererElement",value:function(){return this.renderer.domElement}},{key:"update",value:function(e){}},{key:"createScene",value:function(){var e=Object(f.a)(p.a.mark(function e(){var t,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.renderer.setSize(this.container.clientWidth,this.container.clientHeight),this.scene=new U.Scene,this.camera=new U.PerspectiveCamera(75,this.container.clientWidth/this.container.clientHeight,.1,200),this.controls=new L.a(this.camera,this.renderer.domElement),this.controls.rotateSpeed=1,this.controls.zoomSpeed=1,this.controls.maxDistance=150,this.controls.minDistance=50,this.controls.panSpeed=0,this.controls.enableZoom=!0,this.controls.enablePan=!1,t=new U.AmbientLight(16777215,1),this.scene.add(t),a=new U.DirectionalLight(16777215,.4),this.scene.add(a),this.spotLight=a,this.getModel(),window.addEventListener("resize",this.resize,!1),this.animate();case 19:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getModel",value:function(){var e=Object(f.a)(p.a.mark(function e(){var t,a=this;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=new w.a,B.a.get("https://firebasestorage.googleapis.com/v0/b/abasi-configurator/o/models%2F3.FBX?alt=media&token=72d4c4c7-5bcc-47d9-90e5-dfe13b115750",{responseType:"arraybuffer"}).then(function(e){var n=t.parse(e.data,"/");a.models.abasi=n,a.prepareModel()});case 2:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"loadModel",value:function(e,t){console.log("Loading model...",e),(new w.a).load(e,t)}},{key:"loadModelOBJ",value:function(e,t){console.log("Loading OBJ model...",e),(new U.OBJLoader).load(e,t)}},{key:"loadTexture",value:function(e){console.log("Loading texture...",e);var t=this.textureLoader.load(e);return t.anisotropy=this.renderer.capabilities.getMaxAnisotropy(),t.wrapS=U.ClampToEdgeWrapping,t.wrapT=U.ClampToEdgeWrapping,t.minFilter=U.LinearMipMapLinearFilter,t.magFilter=U.LinearMipMapLinearFilter,t}},{key:"resize",value:function(){this.camera.aspect=this.container.clientWidth/this.container.clientHeight,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.container.clientWidth,this.container.clientHeight)}},{key:"setModel",value:function(e){var t=this;this.scene.remove(this.currentModel),e.traverse(function(e){e.isMesh&&(e.material.map=t.currentTexture)}),this.currentModel=e,this.scene.add(e)}},{key:"animate",value:function(){requestAnimationFrame(this.animate),this.controls.update(),this.renderScene()}},{key:"renderScene",value:function(){this.renderer.render(this.scene,this.camera)}},{key:"pause",value:function(){this.paused=!0}},{key:"resume",value:function(){this.paused=!1,this.animate()}},{key:"handleEvent",value:function(e,t){switch(e){case T:this.colorChange(t.finish);break;default:console.log("Invalid event type",e)}}},{key:"colorChange",value:function(e){console.log("Color change!!!",e);var t=this.colors[e];if(!t)return console.log("Invalid color material specified!",e);var a=this.models.abasi;t.emissive=t.color,a.traverse(function(e){if(e.isMesh)switch(e.name){case"Body":e.material=t}})}},{key:"prepareModel",value:function(){var e=this,t=this.models.abasi;t.traverse(function(t){if(t instanceof U.Mesh)switch(t.geometry.computeVertexNormals(!0),t.name){case"Pickups":t.material=e.whiteMaterial;break;case"Bridge":t.material=e.blackMetalMaterial;break;case"Fret_dots_Big_side":case"Fret_dots_Small_side":case"Abasi_Logo":t.material=e.whiteMaterial;break;case"Strings":case"String_ends":case"Tuners":t.material=e.metalMaterial;break;case"Strap_holder":case"String_holder":t.material=e.metalMaterial;break;case"Body":case"Neck_Head":t.material=e.darkMetalMaterial;break;case"FRET_Board":t.material=e.brownMaterial;break;default:t.material=e.metalMaterial}console.log(t)}),t.rotation.y=Math.PI,this.scene.add(t)}}]),e}(),z=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(O.a)(t).call(this,e))).handlePrice=a.handlePrice.bind(Object(y.a)(Object(y.a)(a))),a}return Object(k.a)(t,e),Object(g.a)(t,[{key:"handlePrice",value:function(){}},{key:"render",value:function(){return s.a.createElement("div",{className:"container evenly price-container"},s.a.createElement("div",null,s.a.createElement("span",{className:"price space-right"},"$",this.props.price),s.a.createElement("i",{className:"fa fa-question-circle price-icon tooltip",role:"presentation",onClick:this.handlePrice},s.a.createElement("span",{className:"tooltiptext"},"Click me for line item explanation of price"))))}}]),t}(s.a.Component),R=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(O.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(y.a)(Object(y.a)(a))),a}return Object(k.a)(t,e),Object(g.a)(t,[{key:"handleChange",value:function(e){this.props.setData(e)}},{key:"mountRenderer",value:function(e){this.containerRef.appendChild(e)}},{key:"render",value:function(){var e=Object.assign({},this.props.data),t=this.props.itemIndex>0;return delete e.items,s.a.createElement("div",{className:"container evenly viewport"},s.a.createElement("div",{id:"renderer-container",className:"viewport-view"}),t&&s.a.createElement("div",{className:"back-button"},s.a.createElement("button",{className:"btn",onClick:this.props.goBack},"Back")),s.a.createElement("div",{className:"viewport-price"},s.a.createElement(z,{price:this.props.price})))}}]),t}(s.a.Component),_=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(O.a)(t).call(this,e))).handleClick=a.handleClick.bind(Object(y.a)(Object(y.a)(a))),a}return Object(k.a)(t,e),Object(g.a)(t,[{key:"handleClick",value:function(){this.props.callback(this.props.data)}},{key:"render",value:function(){var e=this.props.data.label||this.props.data.title;return s.a.createElement("div",{className:"flex tile",role:"presentation",onClick:this.handleClick},s.a.createElement("span",{className:"tile-label"},e),this.props.data.price&&s.a.createElement("div",{className:"tile-price"},"$",this.props.data.price," USD"))}}]),t}(s.a.Component),W=function(e){var t=e.items,a=e.callback,n=e.columns,r=N.a.map(t.products||t,function(e,t){return s.a.createElement(_,{key:t,data:e,callback:a})}),i=n?"menu columns":"menu";return s.a.createElement("div",{className:i},s.a.createElement("div",{className:"tiles-container"},r))};W.defaultProps={columns:!1};var H=W,J=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(O.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(y.a)(Object(y.a)(a))),a.changeMode=a.changeMode.bind(Object(y.a)(Object(y.a)(a))),a}return Object(k.a)(t,e),Object(g.a)(t,[{key:"handleChange",value:function(e,t){this.props.setData(e,t)}},{key:"changeMode",value:function(e){this.props.changeMode(e)}},{key:"render",value:function(){return s.a.createElement("div",{className:"container home"},s.a.createElement("div",{className:"container home-menu"},s.a.createElement(H,{items:this.props.getItems(),columns:!0,renderer:this.props.renderer,callback:this.props.makeSelection})),s.a.createElement("div",{className:"container home-viewport"},s.a.createElement(R,{price:this.props.price})))}}]),t}(s.a.Component),G=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(O.a)(t).call(this,e))).state={something:void 0},a}return Object(k.a)(t,e),Object(g.a)(t,[{key:"render",value:function(){return this.state.something||"Info pane"}}]),t}(s.a.Component),Y=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(O.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(y.a)(Object(y.a)(a))),a.changeMode=a.changeMode.bind(Object(y.a)(Object(y.a)(a))),a}return Object(k.a)(t,e),Object(g.a)(t,[{key:"handleChange",value:function(e,t){this.props.setData(e,t)}},{key:"changeMode",value:function(e){this.props.changeMode(e)}},{key:"render",value:function(){return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"container option-menu"},s.a.createElement("div",{className:"back-button"},s.a.createElement("button",{className:"btn",onClick:this.props.goBack},"Back")),s.a.createElement(H,{items:this.props.getItems(),setData:this.handleChange,changeMode:this.changeMode,columns:!0})),s.a.createElement("div",{className:"container columns"},s.a.createElement("div",{className:"container option-viewport"},s.a.createElement(R,{data:this.props.data,setData:this.handleChange,changeMode:this.changeMode})),s.a.createElement("div",{className:"container option-info"},s.a.createElement(G,{data:this.props.data,setData:this.handleChange,changeMode:this.changeMode}))))}}]),t}(s.a.Component),$=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(O.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(y.a)(Object(y.a)(a))),a.changeMode=a.changeMode.bind(Object(y.a)(Object(y.a)(a))),a}return Object(k.a)(t,e),Object(g.a)(t,[{key:"handleChange",value:function(e,t){this.props.setData(e,t)}},{key:"changeMode",value:function(e){this.props.changeMode(e)}},{key:"render",value:function(){return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"container option-menu"},s.a.createElement("div",{className:"back-button"},s.a.createElement("button",{className:"btn",onClick:this.props.goBack},"Back")),s.a.createElement(H,{items:this.props.getItems(),setData:this.handleChange,changeMode:this.changeMode,columns:!0})),s.a.createElement("div",{className:"container columns"},s.a.createElement("div",{className:"container option-viewport"},s.a.createElement(R,{data:this.props.data,setData:this.handleChange,changeMode:this.changeMode})),s.a.createElement("div",{className:"container option-info"},s.a.createElement(G,{data:this.props.data,setData:this.handleChange,changeMode:this.changeMode}))))}}]),t}(s.a.Component),K=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(O.a)(t).call(this,e))).handleChange=a.handleChange.bind(Object(y.a)(Object(y.a)(a))),a.changeMode=a.changeMode.bind(Object(y.a)(Object(y.a)(a))),a}return Object(k.a)(t,e),Object(g.a)(t,[{key:"handleChange",value:function(e,t){this.props.setData(e,t)}},{key:"changeMode",value:function(e){this.props.changeMode(e)}},{key:"render",value:function(){return s.a.createElement("div",{className:"container"},s.a.createElement("div",{className:"container option-menu"},s.a.createElement("div",{className:"back-button"},s.a.createElement("button",{className:"btn",onClick:this.props.goBack},"Back")),s.a.createElement(H,{items:this.props.getItems(),setData:this.handleChange,changeMode:this.changeMode,columns:!0})),s.a.createElement("div",{className:"container columns"},s.a.createElement("div",{className:"container option-viewport"},s.a.createElement(R,{data:this.props.data,setData:this.handleChange,changeMode:this.changeMode})),s.a.createElement("div",{className:"container option-info"},s.a.createElement(G,{data:this.props.data,setData:this.handleChange,changeMode:this.changeMode}))))}}]),t}(s.a.Component),V=function e(){Object(v.a)(this,e)},q=a(49),X=a.n(q);a(253);X.a.initializeApp({apiKey:"AIzaSyDAMD7_FNdU0S6u7Yzyo5oo-TUVZND3B14",authDomain:"abasi-configurator.firebaseapp.com",databaseURL:"https://abasi-configurator.firebaseio.com",projectId:"abasi-configurator",storageBucket:"gs://abasi-configurator",messagingSenderId:"90569062003"});X.a;var Z=X.a.auth(),Q=X.a.firestore(),ee=X.a.storage(),te=a(58),ae=a.n(te),ne=new(function(e){function t(){var e;return Object(v.a)(this,t),(e=Object(E.a)(this,Object(O.a)(t).call(this))).clear(),e}return Object(k.a)(t,e),Object(g.a)(t,[{key:"clear",value:function(){this.config=[]}},{key:"loadConfigFromSnapshot",value:function(e){var t=this;return this.clear(),e.forEach(function(e){var a=e.data();a.id=e.id,t.config.push(a)}),this.config}},{key:"getConfig",value:function(){var e=Object(f.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.collection("configuration").get();case 2:return t=e.sent,e.abrupt("return",this.loadConfigFromSnapshot(t));case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAll",value:function(){var e=Object(f.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this.config)&&t.length){e.next=4;break}return e.next=4,this.getConfig();case 4:return e.abrupt("return",this.config);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(f.a)(p.a.mark(function e(t){var a,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=N.a.find(this.config,function(e){return e.id===t})){e.next=8;break}return e.next=4,Q.collection("configuration").doc(t).get();case 4:n=e.sent,(a=n.data()).id=t,this.config.push(a);case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"create",value:function(){var e=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.id||"string"!==typeof t.id||""===t.id){e.next=6;break}return e.next=3,Q.collection("configuration").doc(t.id).set(t);case 3:return this.config=N.a.filter(this.config,function(e){return e.id!==t.id}),this.config.push(t),e.abrupt("return",this.config);case 6:return delete t.id,e.next=9,Q.collection("configuration").doc().set(t);case 9:return this.config.push(t),e.abrupt("return",this.config);case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"saveAll",value:function(){var e=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t);try{N.a.each(t,function(){var e=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.collection("configuration").doc(t.id).set(t);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}catch(a){console.log(a)}case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"createLineitem",value:function(e,t){t.id=ae.a.v4().replace(/-/g,""),console.log(t.id),e.options.push(t)}}]),t}(V)),re=function(e){function t(e){var a,n;return Object(v.a)(this,t),(n=Object(E.a)(this,Object(O.a)(t).call(this,e))).state={items:[[]],mode:C.HOME,price:0,selections:t.getInitialData()},n.getItems=n.getItems.bind(Object(y.a)(Object(y.a)(n))),n.makeSelection=n.makeSelection.bind(Object(y.a)(Object(y.a)(n))),n.propogateEvent=n.propogateEvent.bind(Object(y.a)(Object(y.a)(n))),n.evaluatePrice=n.evaluatePrice.bind(Object(y.a)(Object(y.a)(n))),n.components=(a={},Object(b.a)(a,C.HOME,J),Object(b.a)(a,C.OPTION,Y),Object(b.a)(a,C.PAYMENT,$),Object(b.a)(a,C.CONFIRMATION,K),a),n.renderer=new F(n.state.data),n}return Object(k.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=Object(f.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return this.rendererContainer=document.getElementById("renderer-container"),this.renderer.container=this.rendererContainer,this.renderer.scene||this.renderer.createScene(),this.rendererContainer.appendChild(this.renderer.getRendererElement()),this.evaluatePrice(),e.next=7,ne.getConfig();case 7:t=e.sent,this.setState({items:[N.a.sortBy(t,"position")]});case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(){this.state.mode!==C.CONFIRMATION&&(this.rendererContainer=document.getElementById("renderer-container"),this.renderer.container=this.rendererContainer,this.rendererContainer.appendChild(this.renderer.getRendererElement()),this.renderer.resize(),this.renderer.update(this.state.data))}},{key:"makeSelection",value:function(){var e=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"performUpdate",value:function(){var e=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.evaluatePrice();case 1:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"evaluatePrice",value:function(){var e=Object(f.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=N.a.map(this.state.selections,function(e){return e.price}).reduce(function(e,t){return e+t}),this.setState({price:t});case 2:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"setData",value:function(){var e=Object(f.a)(p.a.mark(function e(t,a){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.collectionId&&!t.collections){e.next=6;break}this.state.items.push(t.collections||t),this.state.itemIndex+=1,this.propogateItems(),e.next=13;break;case 6:if(a){e.next=8;break}throw new Error("No item key supplied!");case 8:(n=Object(m.a)({},this.state.data))[a]=t.handle,this.state.data=n,this.setState({data:n}),this.updateCart();case 13:case"end":return e.stop()}},e,this)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getItems",value:function(){return this.state.items[this.state.items.length-1]}},{key:"goBack",value:function(){if(this.state.itemIndex>0){var e=this.state.itemIndex-1;this.state.items.pop(),this.setState({itemIndex:e})}}},{key:"reset",value:function(){}},{key:"changeMode",value:function(e){this.setState({mode:e})}},{key:"propogateEvent",value:function(e){this.renderer.handleEvent(e,this.state.data)}},{key:"render",value:function(){var e=this.components[this.state.mode];if(!e)throw new Error("Component missing for mode ".concat(this.state.mode));return s.a.createElement("div",{className:"configurator"},this.getItems()&&s.a.createElement(e,{renderer:this.renderer,getItems:this.getItems,makeSelection:this.makeSelection,price:this.state.price}))}}],[{key:"getInitialData",value:function(){return{body:{price:50}}}}]),t}(s.a.Component),se=a(17),ie=(a(255),a(44)),ce=function(){return function(){var e=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Z.onAuthStateChanged(function(e){e&&t({type:"LOGIN",payload:e})});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},oe=function(e,t){return function(){var a=Object(f.a)(p.a.mark(function a(n){return p.a.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:Z.signInWithEmailAndPassword(e,t).then(function(e){var t=e.user;se.b.success("You have logged in"),n({type:"LOGIN",payload:t})}).catch(function(e){console.log(e),se.b.error("Unathorized")});case 1:case"end":return a.stop()}},a)}));return function(e){return a.apply(this,arguments)}}()},le=function(){return function(){var e=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:Z.signOut().then(function(){se.b.success("You have logged out"),t({type:"LOGOUT"})});case 1:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},ue=Object(c.b)(null,n)(function(e){var t=e.user,a=e.logout;return s.a.createElement("div",{className:"app-bar"},s.a.createElement(u.b,{to:"/",className:"brand-logo"},s.a.createElement("img",{src:"/logo.png",alt:"Abasi Logo"})),t&&s.a.createElement("span",{className:"app-actions"},s.a.createElement("span",{className:"active-user"},t.email),s.a.createElement("button",{className:"abasi-logout",onClick:a},"Logout")))}),de=a(139),me=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(O.a)(t).call(this,e))).state={open:!1},a.toggle=a.toggle.bind(Object(y.a)(Object(y.a)(a))),a}return Object(k.a)(t,e),Object(g.a)(t,[{key:"toggle",value:function(e){e.preventDefault(),this.setState({open:!this.state.open})}},{key:"showSettings",value:function(e){e.preventDefault()}},{key:"render",value:function(){return s.a.createElement(de.slide,{isOpen:this.state.open,pageWrapId:"app-body",outerContainerId:"app-container",disableAutoFocus:!0},s.a.createElement(u.b,{to:"/",className:"menu-logo"},s.a.createElement("img",{src:"/logo.png",alt:"Abasi Logo"})),s.a.createElement(u.b,{to:"/"},"Home"),s.a.createElement(u.b,{to:"/orders"},"Orders"),s.a.createElement(u.b,{to:"/assets"},"Asset Management"),s.a.createElement(u.b,{to:"/config"},"Configuration Management"),s.a.createElement(u.b,{to:"/archive"},"Archive Current Configuration"))}}]),t}(s.a.Component),he=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(O.a)(t).call(this,e))).state={email:"",password:""},a.handleChange=a.handleChange.bind(Object(y.a)(Object(y.a)(a))),a.login=a.login.bind(Object(y.a)(Object(y.a)(a))),a}return Object(k.a)(t,e),Object(g.a)(t,[{key:"login",value:function(e){this.props.login(this.state.email,this.state.password),e.preventDefault()}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(b.a)({},a,n))}},{key:"render",value:function(){return s.a.createElement("div",{className:"flex columns abasi-login"},s.a.createElement("h1",{className:"login-header"},"Login"),s.a.createElement("form",{onSubmit:this.login},s.a.createElement("div",{className:"flex columns"},s.a.createElement("input",{className:"abasi-input",type:"text",name:"email",placeholder:"Email",value:this.state.email,onChange:this.handleChange}),s.a.createElement("input",{className:"abasi-input",type:"password",name:"password",placeholder:"Password",value:this.state.password,onChange:this.handleChange}),s.a.createElement("button",{type:"submit",className:"btn abasi-login-button"},"Login"))))}}]),t}(s.a.Component),pe=Object(ie.e)(Object(c.b)(null,n)(he)),fe=function(e){var t=e.url,a=e.title;return s.a.createElement(u.b,{to:t},s.a.createElement("div",{className:"abasi-tile"},s.a.createElement("span",{className:"abasi-tile-label"},a)))},be=function(){return s.a.createElement("div",{className:"abasi-dashboard flex"},s.a.createElement("div",{className:"abasi-dashboard-tiles flex"},s.a.createElement(fe,{title:"Orders",url:"/orders"}),s.a.createElement(fe,{title:"Manage Assets",url:"/assets"}),s.a.createElement(fe,{title:"Manage Active Config",url:"/config"}),s.a.createElement(fe,{title:"Statistics Dashboard",url:"/statistics"})))},ve=new(function(e){function t(){var e;return Object(v.a)(this,t),(e=Object(E.a)(this,Object(O.a)(t).call(this))).clear(),e}return Object(k.a)(t,e),Object(g.a)(t,[{key:"clear",value:function(){this.orders=[]}},{key:"loadOrdersFromSnapshot",value:function(e){var t=this;e.forEach(function(e){var a=e.data();a.id=e.id,t.orders.push(a)})}},{key:"getOrders",value:function(){var e=Object(f.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.collection("orders").get();case 2:t=e.sent,this.loadOrdersFromSnapshot(t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getAll",value:function(){var e=Object(f.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if((t=this.orders)&&t.length){e.next=4;break}return e.next=4,this.getOrders();case 4:return e.abrupt("return",this.orders);case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(f.a)(p.a.mark(function e(t){var a,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=N.a.find(this.orders,function(e){return e.id===t})){e.next=8;break}return e.next=4,Q.collection("orders").doc(t).get();case 4:n=e.sent,(a=n.data()).id=t,this.orders.push(a);case 8:return e.abrupt("return",a);case 9:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"updateNotes",value:function(){var e=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.collection("orders").doc(t.id).set(t);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),t}(V)),ge=a(24),Ee=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(O.a)(t).call(this,e))).state={orders:null},a.getOrders(),a}return Object(k.a)(t,e),Object(g.a)(t,[{key:"getOrders",value:function(){var e=Object(f.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.getAll();case 2:t=e.sent,console.log(t),this.setState({orders:t});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getOrderContent",value:function(e){return s.a.createElement("tr",{className:"abasi-orders-row"},s.a.createElement("td",null,e.orderNumber),s.a.createElement("td",null,e.id),s.a.createElement("td",null,"$",e.total),s.a.createElement("td",null,e.status),s.a.createElement("td",null,s.a.createElement(u.b,{to:"/orders/".concat(e.id)},"View Order")))}},{key:"getDefaultContent",value:function(){return s.a.createElement("div",{className:"flex columns abasi-orders-spinner"},s.a.createElement("h1",null,"Retrieving Orders"),s.a.createElement(ge.ClipLoader,null))}},{key:"getOrdersContent",value:function(e){var t=N.a.map(e,this.getOrderContent);return s.a.createElement("div",{className:"abasi-orders flex columns"},s.a.createElement("span",{className:"abasi-orders-header"},"Orders"),s.a.createElement("table",{className:"abasi-orders-table abasi-table",border:"1",frame:"void",rules:"rows"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Order Number"),s.a.createElement("th",null,"Invoice ID"),s.a.createElement("th",null,"Total"),s.a.createElement("th",null,"Payment Status"),s.a.createElement("th",null,"Order Link"))),s.a.createElement("tbody",null,t)))}},{key:"render",value:function(){var e=this.state.orders;return e?this.getOrdersContent(e):this.getDefaultContent()}}]),t}(s.a.Component),Oe=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(O.a)(t).call(this,e))).state={order:null,pristineBuilderNotes:!0},a.handleBuilderNotes=a.handleBuilderNotes.bind(Object(y.a)(Object(y.a)(a))),a.saveBuilderNotes=a.saveBuilderNotes.bind(Object(y.a)(Object(y.a)(a))),a.getOrder(),a}return Object(k.a)(t,e),Object(g.a)(t,[{key:"getOrder",value:function(){var e=Object(f.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.get(this.props.match.params.id);case 2:t=e.sent,this.setState({order:t});case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleBuilderNotes",value:function(e){e.preventDefault();var t=this.state.order;t.builderNotes=e.target.value,this.setState({order:t,pristineBuilderNotes:!1})}},{key:"saveBuilderNotes",value:function(){var e=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.next=3,ve.updateNotes(this.state.order);case 3:se.b.success("Successfully saved builder notes"),this.setState({pristineBuilderNotes:!0});case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"getSpecs",value:function(e){return N.a.map(e,function(e){return s.a.createElement("div",{className:"spec",key:e.id},s.a.createElement("span",{className:"title"},e.title),s.a.createElement("span",{className:"price"},"$",e.price))})}},{key:"getPurchaserInfo",value:function(e){return s.a.createElement("div",{className:"purchaser-info"},s.a.createElement("div",{className:"item name"},s.a.createElement("span",{className:"label"},"Purchaser Name:"),s.a.createElement("span",{className:"value"},e.firstName," ",e.lastName)),s.a.createElement("div",{className:"item email"},s.a.createElement("span",{className:"label"},"Purchaser Email:"),s.a.createElement("span",{className:"value"},s.a.createElement("a",{href:"mailto:".concat(e.email),className:"purchaser-email-link"},e.email))),s.a.createElement("div",{className:"item address"},s.a.createElement("span",{className:"label"},"Purchaser Address:"),s.a.createElement("span",{className:"value"},e.address.full)))}},{key:"getDefaultContent",value:function(){return s.a.createElement("div",{className:"flex columns abasi-order-listing-spinner"},s.a.createElement("h1",null,"Retrieving Order"),s.a.createElement(ge.ClipLoader,null))}},{key:"getOrderContent",value:function(e,t,a){return s.a.createElement("div",{className:"abasi-order-listing flex columns"},s.a.createElement("h1",{className:"order-header"},"Order #",e.orderNumber),s.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:e.configuratorUrl,className:"configurator-link"},"Configurator Link"),s.a.createElement("div",{className:"flex order-info-wrapper"},s.a.createElement("div",{className:"order-info"},s.a.createElement("div",{className:"item invoice"},s.a.createElement("span",{className:"label"},"Invoice ID:"),s.a.createElement("span",{className:"value"},e.id)),s.a.createElement("div",{className:"item total"},s.a.createElement("span",{className:"label"},"Total:"),s.a.createElement("span",{className:"value"},"$",e.total)),s.a.createElement("div",{className:"item status"},s.a.createElement("span",{className:"label"},"Order Status:"),s.a.createElement("span",{className:"value"},e.status)),s.a.createElement("div",{className:"item payment-type"},s.a.createElement("span",{className:"label"},"Payment Type:"),s.a.createElement("span",{className:"value"},e.paymentType)),s.a.createElement("div",{className:"item stripe-id"},s.a.createElement("span",{className:"label"},"Stripe Transaction:"),s.a.createElement("span",{className:"value"},s.a.createElement("a",{href:"strip.com",target:"_blank",className:"stripe-link"},e.transactionId)))),a),s.a.createElement("div",{className:"flex builder-info-wrapper"},s.a.createElement("div",{className:"specs"},t),s.a.createElement("div",{className:"builder-notes"},s.a.createElement("h1",null,"Builder Notes"),s.a.createElement("p",null,"Notes about the order for internal use only."),s.a.createElement("textarea",{value:e.builderNotes,onChange:this.handleBuilderNotes}),s.a.createElement("button",{disabled:this.state.pristineBuilderNotes,className:"builder-notes-save-button btn",onClick:this.saveBuilderNotes},"Save"))),s.a.createElement("div",{className:"flex order-actions"},s.a.createElement("h1",null,"Order Actions"),s.a.createElement("button",{disabled:!0,className:"btn order-action delete"},"Delete Order"),"Deposit"===e.paymentType&&s.a.createElement("button",{className:"btn order-action paid"},"Payment Complete"),s.a.createElement("button",{className:"btn order-action fulfill"},"Fulfill Order")))}},{key:"render",value:function(){var e=this.state.order;if(e){var t=this.getSpecs(e.specs),a=this.getPurchaserInfo(e.purchaserInfo);return this.getOrderContent(e,t,a)}return this.getDefaultContent(e)}}]),t}(s.a.Component),ke=a(37),ye=new(function(e){function t(){var e;return Object(v.a)(this,t),(e=Object(E.a)(this,Object(O.a)(t).call(this))).clear(),e}return Object(k.a)(t,e),Object(g.a)(t,[{key:"clear",value:function(){this.assets={},this.modelMetadata=[],this.textureMetadata=[]}},{key:"createModel",value:function(){var e=Object(f.a)(p.a.mark(function e(t,a){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={id:ae.a.v4().replace(/-/g,""),filename:t,size:a},e.next=3,Q.collection("models").doc(n.id).set(n);case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"createTexture",value:function(){var e=Object(f.a)(p.a.mark(function e(t,a){var n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={id:ae.a.v4().replace(/-/g,""),filename:t,size:a},e.next=3,Q.collection("textures").doc(n.id).set(n);case 3:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}()},{key:"getModelMetadata",value:function(){var e=Object(f.a)(p.a.mark(function e(){var t,a=this;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.modelMetadata)||!t.length){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,Q.collection("models").get();case 5:return e.sent.forEach(function(e){var t=e.data();t.id=e.id,a.modelMetadata.push(t)}),e.abrupt("return",this.modelMetadata);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getTextureMetadata",value:function(){var e=Object(f.a)(p.a.mark(function e(){var t,a=this;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.textureMetadata)||!t.length){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,Q.collection("textures").get();case 5:return e.sent.forEach(function(e){var t=e.data();t.id=e.id,a.textureMetadata.push(t)}),e.abrupt("return",this.textureMetadata);case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"removeTexture",value:function(){var e=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.collection("textures").doc(t).delete();case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"removeModel",value:function(){var e=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Q.collection("models").doc(t).delete();case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()}]),t}(V)),je=a(99),Ne=a.n(je),Ce=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(O.a)(t).call(this,e))).handleUploadStart=function(){return a.setState({uploading:!0,progress:0})},a.handleProgress=function(e){return a.setState({progress:e})},a.handleUploadError=function(e){a.setState({uploading:!1}),se.b.error(e)},a.handleModelUploadSuccess=function(){var e=Object(f.a)(p.a.mark(function e(t,n){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye.createModel(t,n.metadata_.size);case 2:a.setState({progress:100,uploading:!1}),se.b.success("Model uploaded successfully");case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.handleTextureUploadSuccess=function(){var e=Object(f.a)(p.a.mark(function e(t,n){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye.createTexture(t,n.metadata_.size);case 2:a.setState({progress:100,uploading:!1}),se.b.success("Texture uploaded successfully");case 4:case"end":return e.stop()}},e)}));return function(t,a){return e.apply(this,arguments)}}(),a.state={loading:!0,uploading:!1,assets:null,models:null},a.getMetadata=a.getMetadata.bind(Object(y.a)(Object(y.a)(a))),a.handleChange=a.handleChange.bind(Object(y.a)(Object(y.a)(a))),a.deleteModel=a.deleteModel.bind(Object(y.a)(Object(y.a)(a))),a.deleteTexture=a.deleteTexture.bind(Object(y.a)(Object(y.a)(a))),a.getTextureAssetContent=a.getTextureAssetContent.bind(Object(y.a)(Object(y.a)(a))),a.getModelAssetContent=a.getModelAssetContent.bind(Object(y.a)(Object(y.a)(a))),a}return Object(k.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.getMetadata()}},{key:"getMetadata",value:function(){var e=Object(f.a)(p.a.mark(function e(){var t,a;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye.getTextureMetadata();case 2:return t=e.sent,e.next=5,ye.getModelMetadata();case 5:a=e.sent,console.log(t),this.setState({loading:!1,textureMetadata:t,modelMetadata:a});case 8:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"deleteTexture",value:function(){var e=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye.removeTexture(t);case 2:se.b.success("Successfully removed texture");case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteModel",value:function(){var e=Object(f.a)(p.a.mark(function e(t){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ye.removeModel(t);case 2:se.b.success("Successfully removed model");case 3:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(b.a)({},a,n))}},{key:"getTextureAssetContent",value:function(e){var t=this;return s.a.createElement("tr",{className:"abasi-assets-row",key:e.id},s.a.createElement("td",null,e.filename),s.a.createElement("td",null,e.id),s.a.createElement("td",null,e.size),s.a.createElement("td",null,s.a.createElement("button",{className:"abasi-assets-table-button",onClick:function(){t.deleteTexture(e.id)}},"Delete Asset")))}},{key:"getModelAssetContent",value:function(e){var t=this;return s.a.createElement("tr",{className:"abasi-assets-row",key:e.id},s.a.createElement("td",null,e.filename),s.a.createElement("td",null,e.id),s.a.createElement("td",null,e.size),s.a.createElement("td",null,s.a.createElement("button",{className:"abasi-assets-table-button",onClick:function(){t.deleteModel(e.id)}},"Delete Asset")))}},{key:"getManageContent",value:function(){if(this.state.loading)return s.a.createElement("div",{className:"abasi-manage-assets loading flex columns"},s.a.createElement(ge.ClipLoader,null),s.a.createElement("p",null,"Loading asset metadata..."));var e=N.a.map(this.state.textureMetadata,this.getTextureAssetContent),t=N.a.map(this.state.modelMetadata,this.getModelAssetContent);return s.a.createElement("div",{className:"abasi-manage-assets flex columns"},s.a.createElement("h1",null,"Manage Textures"),s.a.createElement("table",{className:"abasi-assets-table abasi-table",border:"1",frame:"void",rules:"rows"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Asset Name"),s.a.createElement("th",null,"Asset ID"),s.a.createElement("th",null,"File Size"),s.a.createElement("th",null,"Delete Asset"))),s.a.createElement("tbody",null,e)),s.a.createElement("h1",null,"Manage Models"),s.a.createElement("table",{className:"abasi-assets-table abasi-table",border:"1",frame:"void",rules:"rows"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Asset Name"),s.a.createElement("th",null,"Asset ID"),s.a.createElement("th",null,"File Size"),s.a.createElement("th",null,"Delete Asset"))),s.a.createElement("tbody",null,t)))}},{key:"getModelContent",value:function(){return s.a.createElement("div",{className:"abasi-upload-model flex columns"},s.a.createElement("h1",null,"Upload Model"),s.a.createElement("label",{htmlFor:"model"},s.a.createElement("span",{className:"label"},"Choose File:"),s.a.createElement(Ne.a,{accept:".fbx,.obj",name:"model",storageRef:ee.ref("models"),onUploadStart:this.handleUploadStart,onUploadError:this.handleUploadError,onUploadSuccess:this.handleModelUploadSuccess,onProgress:this.handleProgress})))}},{key:"getTextureContent",value:function(){return s.a.createElement("div",{className:"abasi-upload-texture flex columns"},s.a.createElement("h1",null,"Upload Texture"),s.a.createElement("label",{htmlFor:"texture"},s.a.createElement("span",{className:"label"},"Choose File:"),s.a.createElement(Ne.a,{accept:"image/*",name:"texture",storageRef:ee.ref("textures"),onUploadStart:this.handleUploadStart,onUploadError:this.handleUploadError,onUploadSuccess:this.handleTextureUploadSuccess,onProgress:this.handleProgress})))}},{key:"render",value:function(){return s.a.createElement("div",{className:"flex columns abasi-assets"},s.a.createElement("h1",null,"Asset Management"),s.a.createElement(ke.d,null,s.a.createElement(ke.b,null,s.a.createElement(ke.a,null,"Manage Assets"),s.a.createElement(ke.a,null,"Upload Model"),s.a.createElement(ke.a,null,"Upload Texture")),s.a.createElement(ke.c,null,this.getManageContent()),s.a.createElement(ke.c,null,this.getModelContent()),s.a.createElement(ke.c,null,this.getTextureContent())))}}]),t}(s.a.Component),xe=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(O.a)(t).call(this,e))).state={saving:!1,config:null},a.handleChange=a.handleChange.bind(Object(y.a)(Object(y.a)(a))),a.getLineitem=a.getLineitem.bind(Object(y.a)(Object(y.a)(a))),a.moveUp=a.moveUp.bind(Object(y.a)(Object(y.a)(a))),a.moveDown=a.moveDown.bind(Object(y.a)(Object(y.a)(a))),a.save=a.save.bind(Object(y.a)(Object(y.a)(a))),a.sort=a.sort.bind(Object(y.a)(Object(y.a)(a))),a}return Object(k.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.getConfiguration()}},{key:"getConfiguration",value:function(){var e=Object(f.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.getAll();case 2:t=e.sent,this.sort(t);case 4:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"sort",value:function(e){e=N.a.sortBy(e,function(e){return Number.parseInt(e.position)}),this.setState({config:e})}},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(b.a)({},a,n))}},{key:"save",value:function(){var e=Object(f.a)(p.a.mark(function e(){return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("Saving..."),this.setState({saving:!0}),e.next=4,ne.saveAll(this.state.config);case 4:se.b.success("Successfully saved configuration"),this.setState({saving:!1});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"moveUp",value:function(e){var t=this.state.config;if(t){var a=N.a.find(t,function(t){return t.id===e});a.position=Number.parseInt(a.position),a.position--,this.sort(t)}else console.log("Something horrible is happening")}},{key:"moveDown",value:function(e){var t=this.state.config;if(t){var a=N.a.find(t,function(t){return t.id===e});a.position=Number.parseInt(a.position),a.position++,this.sort(t)}else console.log("Something horrible is happening")}},{key:"getLineitem",value:function(e){var t=this,a=e.options?e.options.length:0,n="/edit-config/".concat(e.id);return s.a.createElement("tr",{className:"abasi-config-item",key:e.id},s.a.createElement("td",{className:"position"},e.position,"."),s.a.createElement("td",{className:"title"},e.title),s.a.createElement("td",{className:"type"},e.type),s.a.createElement("td",{className:"key"},e.key),s.a.createElement("td",{className:"options"},a," Subitems"),s.a.createElement("td",{className:"shuffle"},s.a.createElement("button",{className:"move up",onClick:function(){return t.moveUp(e.id)}},s.a.createElement("i",{className:"fa fa-arrow-up"})),s.a.createElement("button",{className:"move down",onClick:function(){return t.moveDown(e.id)}},s.a.createElement("i",{className:"fa fa-arrow-down"}))),s.a.createElement("td",null,s.a.createElement(u.b,{to:n},"Edit")))}},{key:"getConfigContent",value:function(e){var t=N.a.map(e,this.getLineitem);return s.a.createElement("table",{className:"abasi-config-items abasi-table",border:"1",frame:"void",rules:"rows"},s.a.createElement("thead",{className:"abasi-config-item"},s.a.createElement("tr",null,s.a.createElement("th",{className:"position"},"#"),s.a.createElement("th",{className:"title"},"Title"),s.a.createElement("th",{className:"type"},"Type"),s.a.createElement("th",{className:"key"},"Key"),s.a.createElement("th",{className:"options"},"Options"),s.a.createElement("th",{className:"shuffle"},"Move"),s.a.createElement("th",null,"Edit"))),s.a.createElement("tbody",null,t))}},{key:"render",value:function(){var e,t=this.state,a=t.config,n=t.saving;return e=a&&a.length?this.getConfigContent(a):s.a.createElement("span",{className:"flex columns loading"},s.a.createElement(ge.ClipLoader,null),s.a.createElement("p",null,"Loading Configuration")),s.a.createElement("div",{className:"flex columns abasi-config"},s.a.createElement("h1",null,"Configuration Management"),s.a.createElement(u.b,{to:"/add-config"},s.a.createElement("button",{className:"add-config"},"Add Configuration Item")),s.a.createElement("div",{className:"flex columns abasi-config-wrapper"},e),s.a.createElement("button",{disabled:n,className:"abasi-save-config",onClick:this.save},n&&s.a.createElement(ge.ClipLoader,null),!n&&s.a.createElement("span",null,"Save Configuration")))}}]),t}(s.a.Component),we=a(142),Me=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(O.a)(t).call(this,e))).state=Object(m.a)({},a.props.data,{metadata:a.props.metadata}),a.handleChange=a.handleChange.bind(Object(y.a)(Object(y.a)(a))),a}return Object(k.a)(t,e),Object(g.a)(t,[{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value;this.setState(Object(b.a)({},a,n))}},{key:"render",value:function(){var e=this,t=this.state;return t.maskFields?s.a.createElement("div",{className:"flex abasi-lineitem"},s.a.createElement("div",{className:"name"},"Name"),s.a.createElement("div",{className:"price"},"Price"),s.a.createElement("div",{className:"asset"},"Asset"),s.a.createElement("div",{className:"delete"},"Delete")):s.a.createElement("div",{className:"flex abasi-lineitem"},s.a.createElement("div",{className:"name"},s.a.createElement("input",{className:"",type:"text",name:"name",placeholder:"Name",value:t.name,onChange:this.handleChange})),s.a.createElement("div",{className:"price"},s.a.createElement("input",{className:"",type:"number",name:"asset",value:t.price,onChange:this.handleChange})),s.a.createElement("div",{className:"asset"},s.a.createElement("select",{name:"asset",value:t.asset,className:"",onChange:this.handleChange},N.a.map(t.metadata,function(e){return s.a.createElement("option",{value:e.id},e.filename)}))),s.a.createElement("div",{className:"delete"},s.a.createElement("button",{className:"btn",type:"button",onClick:function(){e.props.delete(t)}},"Delete")))}}]),t}(s.a.Component),Se=function(e){function t(e){var a;Object(v.a)(this,t);var n=(a=Object(E.a)(this,Object(O.a)(t).call(this,e))).props.match?a.props.match.params.id:void 0;return a.state={editing:n||!1,loading:n||!1,config:{id:void 0,title:void 0,description:void 0,type:"texture",position:99,key:void 0,options:[]},metadata:[]},a.handleChange=a.handleChange.bind(Object(y.a)(Object(y.a)(a))),a.save=a.save.bind(Object(y.a)(Object(y.a)(a))),a.getConfiguration=a.getConfiguration.bind(Object(y.a)(Object(y.a)(a))),a.addLineItem=a.addLineItem.bind(Object(y.a)(Object(y.a)(a))),a.removeLineItem=a.removeLineItem.bind(Object(y.a)(Object(y.a)(a))),a}return Object(k.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){this.props.match&&this.props.match.params.id&&this.getConfiguration(this.props.match.params.id)}},{key:"getConfiguration",value:function(){var e=Object(f.a)(p.a.mark(function e(t){var a,n;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ne.get(t);case 2:a=e.sent,console.log(a.type),e.t0=a.type,e.next="model"===e.t0?7:"texture"===e.t0?11:15;break;case 7:return e.next=9,ye.getModelMetadata();case 9:return n=e.sent,e.abrupt("break",16);case 11:return e.next=13,ye.getTextureMetadata();case 13:return n=e.sent,e.abrupt("break",16);case 15:return e.abrupt("break",16);case 16:this.setState({config:a,metadata:n,loading:!1});case 17:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"handleChange",value:function(e){var t=e.target,a=t.name,n=t.value,r=this.state.config;r[a]=n,this.setState({config:r})}},{key:"save",value:function(){var e=Object(f.a)(p.a.mark(function e(t){var a,n,r,s;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t.preventDefault(),a=this.state.config,n=a.title,r=a.description,s=a.key,n&&r&&s){e.next=4;break}return e.abrupt("return",se.b.error("Must provide title, description, and key"));case 4:return e.next=6,ne.create(this.state.config);case 6:se.b.success("Successfully saved configuration item!"),this.props.history.push("/config");case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"addLineItem",value:function(){var e=this.state.config;ne.createLineitem(e,{}),this.setState({config:e})}},{key:"removeLineItem",value:function(e){var t=this.state.config;t.options=N.a.filter(t.options,function(t){return t.id!==e.id}),this.setState({config:t})}},{key:"getLineItems",value:function(e){var t=this;return e=[{maskFields:!0}].concat(Object(we.a)(e)),N.a.map(e,function(e){return s.a.createElement(Me,{data:e,key:"lineitem-".concat(e.name),delete:t.removeLineItem,metadata:t.state.metadata})})}},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.editing,n=e.config;if(t)return s.a.createElement("div",{className:"abasi-add flex columns"},s.a.createElement(ge.ClipLoader,null),"Loading Configuration...");var r=this.getLineItems(n.options);return s.a.createElement("div",{className:"abasi-add flex columns"},a&&s.a.createElement("h1",null,"Edit Configuration Item"),!a&&s.a.createElement("h1",null,"Add Configuration Item"),s.a.createElement(u.b,{to:"/config"},s.a.createElement("button",{className:"btn back-button"},"Back to configuration")),s.a.createElement("form",{onSubmit:this.save,className:"flex"},s.a.createElement("div",{className:"flex columns"},s.a.createElement("label",{htmlFor:"title"},s.a.createElement("span",{className:"label"},"Title:"),s.a.createElement("input",{className:"abasi-input",type:"text",name:"title",placeholder:"Title",value:n.title,onChange:this.handleChange})),s.a.createElement("label",{htmlFor:"description"},s.a.createElement("span",{className:"label"},"Description:"),s.a.createElement("input",{className:"abasi-input",type:"text",name:"description",placeholder:"Description",value:n.description,onChange:this.handleChange})),s.a.createElement("label",{htmlFor:"key"},s.a.createElement("span",{className:"label"},"Key:"),s.a.createElement("input",{className:"abasi-input",type:"text",name:"key",placeholder:"Key",value:n.key,onChange:this.handleChange})),s.a.createElement("label",{htmlFor:"type"},s.a.createElement("span",{className:"label"},"Configuration Type:"),s.a.createElement("select",{name:"type",value:n.type,className:"abasi-input",onChange:this.handleChange},s.a.createElement("option",{value:"texture"},"Texture"),s.a.createElement("option",{value:"model"},"Model"),s.a.createElement("option",{value:"material"},"Material"),s.a.createElement("option",{value:"submenu"},"Submenu"))),s.a.createElement("label",{htmlFor:"position"},s.a.createElement("span",{className:"label"},"Position:"),s.a.createElement("input",{className:"abasi-input",type:"number",name:"position",value:n.position,onChange:this.handleChange})),s.a.createElement("div",{className:"flex columns abasi-selections"},s.a.createElement("h1",null,"Configuration Line Items"),s.a.createElement("button",{className:"btn abasi-add-line-item",type:"button",onClick:this.addLineItem},"Add New Line Item"),s.a.createElement("div",{className:"flex columns lineitems"},r)),s.a.createElement("button",{type:"submit",className:"btn abasi-add-button"},"Save Configuration Item"))))}}]),t}(s.a.Component),Ie=a(141),Le=function(e){return s.a.createElement(Ie.a,{data:e.data,width:300,height:300})},Te=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(O.a)(t).call(this,e))).state={loading:!0,orders:void 0},a}return Object(k.a)(t,e),Object(g.a)(t,[{key:"componentDidMount",value:function(){var e=Object(f.a)(p.a.mark(function e(){var t;return p.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ve.getAll();case 2:t=e.sent,console.log(t),this.setState({orders:t,loading:!1});case 5:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.loading,a=e.orders;return t?s.a.createElement("div",{className:"abasi-stats flex columns"},s.a.createElement(ge.ClipLoader,null),s.a.createElement("p",null,"Loading orders...")):s.a.createElement("div",{className:"abasi-stats flex columns"},s.a.createElement("h1",null,"Abasi Order Statistics"),s.a.createElement(Le,{data:a}))}}]),t}(s.a.Component),De=function(e){e.user;return s.a.createElement("div",{className:"flex"},s.a.createElement(ie.c,null,s.a.createElement(ie.a,{exact:!0,path:"/",component:be}),s.a.createElement(ie.a,{exact:!0,path:"/orders",component:Ee}),s.a.createElement(ie.a,{exact:!0,path:"/orders/:id",component:Oe}),s.a.createElement(ie.a,{exact:!0,path:"/assets",component:Ce}),s.a.createElement(ie.a,{exact:!0,path:"/config",component:xe}),s.a.createElement(ie.a,{exact:!0,path:"/add-config",component:Se}),s.a.createElement(ie.a,{exact:!0,path:"/edit-config/:id",component:Se}),s.a.createElement(ie.a,{exact:!0,path:"/statistics",component:Te})))},Ae=(a(131),Object(ie.e)(Object(c.b)(function(e){return{user:e.user}},n)(function(e){var t=e.user,a=localStorage.getItem("user"),n=t||JSON.parse(a);return ce(),t=t||n,s.a.createElement(u.a,null,s.a.createElement("div",{id:"app-container",className:"flex columns"},s.a.createElement(se.a,{className:"toast-container",toastClassName:"dark-toast",progressClassName:"toast-progress",position:"bottom-center"}),s.a.createElement(ue,{user:t}),t&&s.a.createElement(me,null),s.a.createElement("div",{className:"flex app-body"},!t&&s.a.createElement(pe,null),t&&s.a.createElement(ie.c,null,s.a.createElement(ie.a,{exact:!0,path:"/embed",component:re}),s.a.createElement(ie.a,{path:"/",render:function(e){return s.a.createElement(De,Object.assign({},e,{user:t}))}})))))}))),Pe=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function Be(e){navigator.serviceWorker.register(e).then(function(e){e.onupdatefound=function(){var t=e.installing;t.onstatechange=function(){"installed"===t.state&&(navigator.serviceWorker.controller?console.log("New content is available; please refresh."):console.log("Content is cached for offline use."))}}}).catch(function(e){console.error("Error during service worker registration:",e)})}var Ue=Object(o.d)(d,{},Object(o.a)(l.a));!function(){if("serviceWorker"in navigator){if(new URL("/abasi-configurator",window.location).origin!==window.location.origin)return;window.addEventListener("load",function(){var e="".concat("/abasi-configurator","/service-worker.js");Pe?(function(e){fetch(e).then(function(t){404===t.status||-1===t.headers.get("content-type").indexOf("javascript")?navigator.serviceWorker.ready.then(function(e){e.unregister().then(function(){window.location.reload()})}):Be(e)}).catch(function(){console.log("No internet connection found. App is running in offline mode.")})}(e),navigator.serviceWorker.ready.then(function(){console.log("This web app is being served cache-first by a service worker. To learn more, visit https://goo.gl/SC7cgQ")})):Be(e)})}}(),Object(i.render)(s.a.createElement(c.a,{store:Ue},s.a.createElement(u.a,null,s.a.createElement(Ae,null))),document.getElementById("root"))}},[[143,1,2]]]);
//# sourceMappingURL=main.1db7c4cd.chunk.js.map