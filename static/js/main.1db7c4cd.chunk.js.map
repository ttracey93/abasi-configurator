{"version":3,"sources":["reducers/index.js","reducers/auth.js","reducers/header.js","constants/modes.js","constants/events.js","components/helpers/Materials.js","components/Renderer.js","components/Price.js","components/Viewport.js","components/Tile.js","components/Menu.js","components/views/HomeView.js","components/Info.js","components/views/OptionView.js","components/views/PaymentView.js","components/views/ConfirmationView.js","services/Service.js","firebase.js","services/ConfigurationService.js","components/Configurator.js","actions/auth.js","components/Header.js","components/Sidebar.js","components/Welcome.js","components/dashboard/Tile.js","components/dashboard/Home.js","services/OrderService.js","components/dashboard/Orders.js","components/dashboard/OrderListing.js","services/AssetService.js","components/dashboard/ManageAssets.js","components/dashboard/ManageConfiguration.js","components/dashboard/LineItem.js","components/dashboard/AddConfiguration.js","components/dashboard/Chart.js","components/dashboard/Statistics.js","components/dashboard/Dashboard.js","components/App.js","registerServiceWorker.js","index.js"],"names":["combineReducers","user","state","arguments","length","undefined","action","type","localStorage","setItem","JSON","stringify","payload","window","location","reload","searchValue","modes","HOME","OPTION","PAYMENT","CONFIRMATION","events","Three","require","OBJLoader","Materials","urls","path","CubeTextureLoader","load","reflectionCube","color","MeshStandardMaterial","roughness","metalness","envMap","aoMapIntensity","envMapIntensity","displacementScale","normalScale","flatShading","Renderer","data","Object","classCallCheck","this","Cache","enabled","TEXTURE_ANISOTROPY","animate","bind","resize","prepareModel","handleEvent","colorChange","createScene","renderer","WebGLRenderer","alpha","setClearColor","container","textureLoader","TextureLoader","colors","orange","MeshPhysicalMaterial","name","red","purple","white","models","materials","metalMaterial","metalWithColor","darkMetalMaterial","blackMetalMaterial","brownMaterial","withColor","whiteMaterial","domElement","setSize","clientWidth","clientHeight","scene","Scene","camera","PerspectiveCamera","controls","OrbitControls","rotateSpeed","zoomSpeed","maxDistance","minDistance","panSpeed","enableZoom","enablePan","ambient","AmbientLight","add","spotLight","DirectionalLight","getModel","addEventListener","loader","FBXLoader","Axios","get","responseType","then","response","fbxScene","parse","_this","abasi","cb","console","log","texture","anisotropy","capabilities","getMaxAnisotropy","wrapS","ClampToEdgeWrapping","wrapT","minFilter","LinearMipMapLinearFilter","magFilter","aspect","updateProjectionMatrix","model","_this2","remove","currentModel","traverse","node","isMesh","material","map","currentTexture","requestAnimationFrame","update","renderScene","render","paused","event","Events","finish","colorMat","fbx","emissive","child","_this3","Mesh","geometry","computeVertexNormals","rotation","y","Math","PI","Price","props","possibleConstructorReturn","getPrototypeOf","call","handlePrice","assertThisInitialized","react_default","a","createElement","className","price","role","onClick","React","Component","Viewport","handleChange","setData","element","containerRef","appendChild","viewData","assign","showBackButton","itemIndex","items","id","goBack","Price_Price","Tile","handleClick","callback","label","title","Menu","_ref","columns","tiles","_","products","item","i","Tile_Tile","key","defaultProps","HomeView","changeMode","mode","components_Menu","getItems","makeSelection","Viewport_Viewport","Info","something","OptionView","Info_Info","PaymentView","ConfirmationView","Service","Firebase","initializeApp","apiKey","authDomain","databaseURL","projectId","storageBucket","messagingSenderId","Auth","auth","DB","firestore","Storage","storage","services_ConfigurationService","ConfigurationService","clear","config","snapshot","forEach","doc","push","collection","loadConfigFromSnapshot","getConfig","find","c","set","filter","configs","each","asyncToGenerator","regenerator_default","mark","_callee5","wrap","_context5","prev","next","stop","_x4","apply","ex","uuid","v4","replace","options","Configurator","_this$components","Modes","selections","getInitialData","propogateEvent","evaluatePrice","components","defineProperty","rendererContainer","document","getElementById","getRendererElement","setState","sortBy","selection","s","reduce","p","collectionId","collections","propogateItems","Error","dataCopy","handle","updateCart","pop","concat","body","initUser","_callee","dispatch","_context","onAuthStateChanged","_x","login","email","password","_ref2","_callee2","_context2","signInWithEmailAndPassword","result","toast","success","catch","error","_x2","logout","_ref3","_callee3","_context3","signOut","_x3","connect","actions","react_router_dom","to","src","alt","Sidebar","open","toggle","e","preventDefault","BurgerMenu","isOpen","pageWrapId","outerContainerId","disableAutoFocus","Welcome","_event$target","target","value","onSubmit","placeholder","onChange","withRouter","url","Home","dashboard_Tile","services_OrderService","OrderService","orders","order","loadOrdersFromSnapshot","getOrders","o","Orders","getAll","orderNumber","total","status","react_spinners","orderContent","getOrderContent","border","frame","rules","getOrdersContent","getDefaultContent","OrderListing","pristineBuilderNotes","handleBuilderNotes","saveBuilderNotes","getOrder","match","params","builderNotes","updateNotes","specs","spec","purchaser","firstName","lastName","href","address","full","purchaserInfo","rel","configuratorUrl","paymentType","transactionId","disabled","getSpecs","getPurchaserInfo","services_AssetService","AssetService","assets","modelMetadata","textureMetadata","filename","size","delete","ManageAssets","handleUploadStart","uploading","progress","handleProgress","handleUploadError","handleModelUploadSuccess","task","createModel","metadata_","handleTextureUploadSuccess","createTexture","loading","getMetadata","deleteModel","deleteTexture","getTextureAssetContent","getModelAssetContent","getTextureMetadata","getModelMetadata","removeTexture","removeModel","asset","textureContent","modelContent","htmlFor","lib_default","accept","storageRef","ref","onUploadStart","onUploadError","onUploadSuccess","onProgress","esm","getManageContent","getModelContent","getTextureContent","ManageConfiguration","saving","getLineitem","moveUp","moveDown","save","sort","getConfiguration","Number","parseInt","position","saveAll","configUrl","lineitems","content","_this$state","getConfigContent","LineItem","objectSpread","metadata","maskFields","m","AddConfiguration","editing","description","addLineItem","removeLineItem","create","history","createLineitem","toConsumableArray","dashboard_LineItem","getLineItems","Chart","react_vis_es","width","height","Statistics","dashboard_Chart","Dashboard","react_router","exact","component","localUser","getItem","authedUser","react_toastify","toastClassName","progressClassName","components_Header","components_Sidebar","components_Welcome","dashboard_Dashboard","isLocalhost","Boolean","hostname","registerValidSW","swUrl","navigator","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","store","createStore","rootReducer","applyMiddleware","thunk","URL","process","origin","fetch","headers","indexOf","ready","unregister","checkValidServiceWorker","registerServiceWorker","es","components_App"],"mappings":"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","file":"static/js/main.1db7c4cd.chunk.js","sourcesContent":["import { combineReducers } from 'redux';\r\nimport auth from './auth';\r\nimport header from './header';\r\n\r\nexport default combineReducers({\r\n  user: auth,\r\n  searchValue: header,\r\n});","export default (state = null, action) => {\r\n  switch (action.type) {\r\n    case 'SET_USER':\r\n    case 'LOGIN':\r\n      localStorage.setItem('user', JSON.stringify(action.payload));\r\n      return action.payload;\r\n    case 'LOGOUT':\r\n      localStorage.setItem('user', null);\r\n      window.location.reload();\r\n      return null;\r\n    default:\r\n      return state;\r\n  }\r\n};","export default (state = null, action) => {\r\n  switch (action.type) {\r\n    default:\r\n      return state;\r\n  }\r\n};","export default {\r\n  HOME: 'Home',\r\n  OPTION: 'Option',\r\n  PAYMENT: 'Payment',\r\n  CONFIRMATION: 'Confirmation',\r\n};\r\n","export default {\r\n  COLOR: 'Color',\r\n};\r\n","import OBJLoader from 'three-obj-loader';\r\nconst Three = require('three');\r\n\r\nOBJLoader(Three);\r\n\r\nclass Materials {\r\n  static envMap() {\r\n    const path = \"/\";\r\n    var format = '.jpg';\r\n    var urls = [\r\n      path + 'px' + format, path + 'nx' + format,\r\n      path + 'py' + format, path + 'ny' + format,\r\n      path + 'pz' + format, path + 'nz' + format\r\n    ];\r\n\r\n    return new Three.CubeTextureLoader().load(urls);\r\n  }\r\n\r\n  static metalWithColor(reflectionCube, color) {\r\n    return new Three.MeshStandardMaterial( {\r\n      color: color,\r\n  \r\n      roughness: 0.4,\r\n      metalness: 0.8,\r\n  \r\n      envMap: reflectionCube, // important -- especially for metals!\r\n      \r\n      aoMapIntensity: 1.0,\r\n      envMapIntensity: 1.0,\r\n      displacementScale: 2.436143, // from original model\r\n      normalScale: 1.0,\r\n\r\n      flatShading: false,\r\n    });\r\n  }\r\n\r\n  static withColor(reflectionCube, color) {\r\n    return new Three.MeshStandardMaterial( {\r\n      color: color,\r\n  \r\n      roughness: 0.8,\r\n      metalness: 0,\r\n      \r\n      flatShading: false,\r\n    });\r\n  }\r\n}\r\n\r\nexport default Materials;\r\n","import FBXLoader from 'three-fbxloader-offical';\r\nimport OBJLoader from 'three-obj-loader';\r\nimport OrbitControls from 'three-orbitcontrols';\r\nimport Events from '../constants/events';\r\nimport Materials from './helpers/Materials';\r\nimport Axios from 'axios';\r\n\r\nconst Three = require('three');\r\n\r\nOBJLoader(Three);\r\n\r\nexport default class Renderer {\r\n  constructor(data) {\r\n    Three.Cache.enabled = true;\r\n\r\n    this.TEXTURE_ANISOTROPY = 16;\r\n\r\n    this.data = data;\r\n\r\n    // Event bindings\r\n    this.animate = this.animate.bind(this);\r\n    this.resize = this.resize.bind(this);\r\n    this.prepareModel = this.prepareModel.bind(this);\r\n    this.handleEvent = this.handleEvent.bind(this);\r\n    this.colorChange = this.colorChange.bind(this);\r\n    this.createScene = this.createScene.bind(this);\r\n\r\n    // Need to set container on instance\r\n    this.renderer = new Three.WebGLRenderer({ alpha: true });\r\n    this.renderer.setClearColor(0xffffff, 0);\r\n\r\n    this.container = undefined;\r\n    this.textureLoader = new Three.TextureLoader();\r\n\r\n    // Local Colors\r\n    this.colors = {\r\n      orange: new Three.MeshPhysicalMaterial( { color: 0xf48942, metalness: 0.9, roughness: 0.2, name: 'orange' } ),\r\n      red: new Three.MeshPhysicalMaterial( { color: 0xe50b2f, metalness: 0.9, roughness: 0.2, name: 'red' } ),\r\n      purple: new Three.MeshPhysicalMaterial( { color: 0x8409b5, metalness: 0.9, roughness: 0.2, name: 'purple' } ),\r\n      white: new Three.MeshPhysicalMaterial( { color: 0xffffff, metalness: 0.9, roughness: 0.2, name: 'purple' } ),\r\n    };\r\n\r\n    this.models = {};\r\n    this.materials = {};\r\n\r\n    const reflectionCube = Materials.envMap();\r\n\r\n    this.metalMaterial = Materials.metalWithColor(reflectionCube, 0xd6d1cd);\r\n    this.darkMetalMaterial = Materials.metalWithColor(reflectionCube, 0x222222);\r\n    this.blackMetalMaterial = Materials.metalWithColor(reflectionCube, 0x000000);\r\n\r\n    this.brownMaterial = Materials.withColor(reflectionCube, 0xa57136);\r\n    this.whiteMaterial = Materials.withColor(reflectionCube, 0xffffff);\r\n  }\r\n\r\n  getRendererElement() {\r\n    return this.renderer.domElement;\r\n  }\r\n\r\n  update(data) {\r\n    // TODO: Update model based on selections?\r\n  }\r\n\r\n  async createScene() {\r\n    this.renderer.setSize(this.container.clientWidth, this.container.clientHeight);\r\n\r\n    this.scene = new Three.Scene();\r\n    this.camera = new Three.PerspectiveCamera(75, this.container.clientWidth / this.container.clientHeight, 0.1, 200);\r\n\r\n    // Setup controls\r\n    this.controls = new OrbitControls(this.camera, this.renderer.domElement);\r\n    this.controls.rotateSpeed = 1.0;\r\n    this.controls.zoomSpeed = 1;\r\n    this.controls.maxDistance = 150;\r\n    this.controls.minDistance = 50;\r\n    this.controls.panSpeed = 0;\r\n    this.controls.enableZoom = true;\r\n    this.controls.enablePan = false;\r\n    \r\n    const ambient = new Three.AmbientLight( 0xffffff, 1 );\r\n    this.scene.add( ambient );\r\n\r\n    // TODO: Set light position\r\n    const spotLight = new Three.DirectionalLight( 0xffffff, 0.4 );\r\n    this.scene.add( spotLight );\r\n    this.spotLight = spotLight;\r\n\r\n    this.getModel();\r\n\r\n    window.addEventListener('resize', this.resize, false);\r\n\r\n    // Begin animation loop\r\n    this.animate();\r\n  }\r\n\r\n  async getModel() {\r\n    const loader = new FBXLoader();\r\n\r\n    Axios.get('https://firebasestorage.googleapis.com/v0/b/abasi-configurator/o/models%2F3.FBX?alt=media&token=72d4c4c7-5bcc-47d9-90e5-dfe13b115750', {\r\n      responseType: 'arraybuffer',\r\n    }).then((response) => {\r\n      const fbxScene = loader.parse(response.data, '/');\r\n\r\n      // Axios.post('http://localhost:9000/save', fbxScene);\r\n\r\n      this.models.abasi = fbxScene;\r\n      this.prepareModel();\r\n    });\r\n\r\n  }\r\n\r\n  loadModel(path, cb) {\r\n    console.log('Loading model...', path);\r\n    new FBXLoader().load(path, cb);\r\n  }\r\n\r\n  loadModelOBJ(path, cb) {\r\n    console.log('Loading OBJ model...', path);\r\n    new Three.OBJLoader().load(path, cb);\r\n  }\r\n\r\n  loadTexture(path) {\r\n    console.log('Loading texture...', path);\r\n\r\n    const texture = this.textureLoader.load(path);\r\n    texture.anisotropy = this.renderer.capabilities.getMaxAnisotropy();\r\n    texture.wrapS = Three.ClampToEdgeWrapping;\r\n    texture.wrapT = Three.ClampToEdgeWrapping;\r\n    texture.minFilter = Three.LinearMipMapLinearFilter;\r\n    texture.magFilter = Three.LinearMipMapLinearFilter;\r\n\r\n    return texture;\r\n  }\r\n\r\n  resize() {\r\n    this.camera.aspect = this.container.clientWidth / this.container.clientHeight;\r\n    this.camera.updateProjectionMatrix();\r\n    this.renderer.setSize(this.container.clientWidth, this.container.clientHeight);\r\n  }\r\n\r\n  /* eslint-disable no-param-reassign */\r\n  setModel(model) {\r\n    this.scene.remove(this.currentModel);\r\n\r\n    model.traverse((node) => {\r\n      if (node.isMesh) {\r\n        node.material.map = this.currentTexture;\r\n      }\r\n    });\r\n\r\n    this.currentModel = model;\r\n    this.scene.add(model);\r\n  }\r\n\r\n  animate() {\r\n    requestAnimationFrame(this.animate);\r\n    this.controls.update();\r\n    this.renderScene();\r\n  }\r\n\r\n  renderScene() {\r\n    this.renderer.render(this.scene, this.camera);\r\n  }\r\n\r\n  pause() {\r\n    this.paused = true;\r\n  }\r\n\r\n  resume() {\r\n    this.paused = false;\r\n    this.animate();\r\n  }\r\n\r\n  handleEvent(event, data) {\r\n    switch (event) {\r\n      case Events.COLOR:\r\n        this.colorChange(data.finish);\r\n        break;\r\n      default:\r\n        console.log('Invalid event type', event);\r\n        break;\r\n    }\r\n  }\r\n\r\n  colorChange(color) {\r\n    console.log('Color change!!!', color);\r\n\r\n    const colorMat = this.colors[color];\r\n\r\n    if (!colorMat) {\r\n      return console.log('Invalid color material specified!', color);\r\n    }\r\n\r\n    const fbx = this.models.abasi;\r\n    colorMat.emissive = colorMat.color;\r\n\r\n    fbx.traverse( child  => {\r\n      if (child.isMesh) {\r\n        switch(child.name) {\r\n          case 'Body':\r\n            child.material = colorMat;\r\n            break;\r\n          default:\r\n            break;\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  prepareModel() {\r\n    const model = this.models.abasi;\r\n\r\n    model.traverse( child => {\r\n      if ( child instanceof Three.Mesh ) {\r\n        child.geometry.computeVertexNormals(true);\r\n\r\n        switch (child.name) {\r\n          case 'Pickups':\r\n            child.material = this.whiteMaterial;\r\n            break;\r\n          case 'Bridge':\r\n            child.material = this.blackMetalMaterial;\r\n            break;\r\n          case 'Fret_dots_Big_side':\r\n          case 'Fret_dots_Small_side':\r\n          case 'Abasi_Logo':\r\n            child.material = this.whiteMaterial;\r\n            break;\r\n          case 'Strings':\r\n          case 'String_ends':\r\n          case 'Tuners':\r\n            child.material = this.metalMaterial;\r\n            break;\r\n          case 'Strap_holder':\r\n          case 'String_holder':\r\n            child.material = this.metalMaterial;\r\n            break;\r\n          case 'Body':\r\n          case 'Neck_Head':\r\n            child.material = this.darkMetalMaterial;\r\n            break;\r\n          case 'FRET_Board':\r\n            child.material = this.brownMaterial;\r\n            break;\r\n          default:\r\n            child.material = this.metalMaterial;\r\n            break;\r\n        }\r\n      }\r\n\r\n      console.log(child);\r\n    });\r\n\r\n    model.rotation.y = Math.PI;\r\n    this.scene.add(model);\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default class Price extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handlePrice = this.handlePrice.bind(this);\r\n  }\r\n\r\n  handlePrice() {\r\n\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container evenly price-container\">\r\n        <div>\r\n          <span className=\"price space-right\">${this.props.price}</span>\r\n\r\n          <i className=\"fa fa-question-circle price-icon tooltip\" role=\"presentation\" onClick={this.handlePrice}>\r\n            <span className=\"tooltiptext\">Click me for line item explanation of price</span>\r\n          </i>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nPrice.propTypes = {\r\n  price: PropTypes.object.isRequired,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport Price from './Price';\r\n// import Modes from '../constants/modes';\r\n\r\nexport default class Viewport extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n  }\r\n\r\n  handleChange(data) {\r\n    this.props.setData(data);\r\n  }\r\n\r\n  mountRenderer(element) {\r\n    this.containerRef.appendChild(element);\r\n  }\r\n\r\n  render() {\r\n    const viewData = Object.assign({}, this.props.data);\r\n    const showBackButton = this.props.itemIndex > 0;\r\n    delete viewData.items;\r\n\r\n    return (\r\n      <div className=\"container evenly viewport\">\r\n        <div id=\"renderer-container\" className=\"viewport-view\" />\r\n\r\n        {showBackButton &&\r\n          <div className=\"back-button\">\r\n            <button className=\"btn\" onClick={this.props.goBack}>\r\n                Back\r\n            </button>\r\n          </div>\r\n        }\r\n\r\n        <div className=\"viewport-price\">\r\n          <Price price={this.props.price} />\r\n          {/* <Price data={this.props.data} changeMode={this.changeMode} /> */}\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nViewport.propTypes = {\r\n  price: PropTypes.number.isRequired,\r\n};\r\n\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nexport default class Tile extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handleClick = this.handleClick.bind(this);\r\n  }\r\n\r\n  handleClick() {\r\n    this.props.callback(this.props.data);\r\n  }\r\n\r\n  render() {\r\n    const label = this.props.data.label || this.props.data.title;\r\n\r\n    return (\r\n      <div className=\"flex tile\" role=\"presentation\" onClick={this.handleClick}>\r\n        <span className=\"tile-label\">\r\n          {label}\r\n        </span>\r\n\r\n        {this.props.data.price &&\r\n          <div className=\"tile-price\">\r\n            ${this.props.data.price} USD\r\n          </div>\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nTile.propTypes = {\r\n  data: PropTypes.object.isRequired,\r\n  callback: PropTypes.func.isRequired,\r\n  imageSource: PropTypes.object,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport _ from 'lodash';\r\nimport Tile from './Tile';\r\n\r\nconst Menu = ({ items, callback, columns }) => {\r\n  const tiles = _.map(items.products || items, (item, i) => {\r\n    return (\r\n      <Tile key={i} data={item} callback={callback} />\r\n    );\r\n  });\r\n\r\n  const className = columns ? 'menu columns' : 'menu';\r\n\r\n  return (\r\n    <div className={className}>\r\n      <div className=\"tiles-container\">\r\n        {tiles}\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nMenu.defaultProps = {\r\n  columns: false,\r\n};\r\n\r\nMenu.propTypes = {\r\n  items: PropTypes.array.isRequired,\r\n  callback: PropTypes.func.isRequired,\r\n  columns: PropTypes.bool,\r\n  renderer: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default Menu;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport ViewPort from '../Viewport';\r\nimport Menu from '../Menu';\r\n\r\nexport default class HomeView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.changeMode = this.changeMode.bind(this);\r\n  }\r\n\r\n  handleChange(data, key) {\r\n    this.props.setData(data, key);\r\n  }\r\n\r\n  changeMode(mode) {\r\n    this.props.changeMode(mode);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container home\">\r\n        <div className=\"container home-menu\">\r\n          <Menu\r\n            items={this.props.getItems()}\r\n            columns\r\n            renderer={this.props.renderer}\r\n            callback={this.props.makeSelection}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"container home-viewport\">\r\n          <ViewPort\r\n            price={this.props.price}\r\n          />\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nHomeView.propTypes = {\r\n  makeSelection: PropTypes.func.isRequired,\r\n  getItems: PropTypes.func.isRequired,\r\n  renderer: PropTypes.object.isRequired,\r\n  price: PropTypes.number.isRequired,\r\n};\r\n","import React from 'react';\r\n\r\nexport default class Info extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      something: undefined,\r\n    };\r\n  }\r\n\r\n  render() {\r\n    return this.state.something || 'Info pane';\r\n  }\r\n}\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport ViewPort from '../Viewport';\r\nimport Menu from '../Menu';\r\nimport Info from '../Info';\r\n\r\nexport default class OptionView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.changeMode = this.changeMode.bind(this);\r\n  }\r\n\r\n  handleChange(data, key) {\r\n    this.props.setData(data, key);\r\n  }\r\n\r\n  changeMode(mode) {\r\n    this.props.changeMode(mode);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"container option-menu\">\r\n          <div className=\"back-button\">\r\n            <button className=\"btn\" onClick={this.props.goBack}>\r\n              Back\r\n            </button>\r\n          </div>\r\n\r\n          <Menu\r\n            items={this.props.getItems()}\r\n            setData={this.handleChange}\r\n            changeMode={this.changeMode}\r\n            columns\r\n          />\r\n        </div>\r\n\r\n        <div className=\"container columns\">\r\n          <div className=\"container option-viewport\">\r\n            <ViewPort\r\n              data={this.props.data}\r\n              setData={this.handleChange}\r\n              changeMode={this.changeMode}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"container option-info\">\r\n            <Info\r\n              data={this.props.data}\r\n              setData={this.handleChange}\r\n              changeMode={this.changeMode}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nOptionView.propTypes = {\r\n  setData: PropTypes.func.isRequired,\r\n  getItems: PropTypes.func.isRequired,\r\n  changeMode: PropTypes.func.isRequired,\r\n  data: PropTypes.object.isRequired,\r\n  goBack: PropTypes.func.isRequired,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport ViewPort from '../Viewport';\r\nimport Menu from '../Menu';\r\nimport Info from '../Info';\r\n\r\nexport default class PaymentView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.changeMode = this.changeMode.bind(this);\r\n  }\r\n\r\n  handleChange(data, key) {\r\n    this.props.setData(data, key);\r\n  }\r\n\r\n  changeMode(mode) {\r\n    this.props.changeMode(mode);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"container option-menu\">\r\n          <div className=\"back-button\">\r\n            <button className=\"btn\" onClick={this.props.goBack}>\r\n              Back\r\n            </button>\r\n          </div>\r\n\r\n          <Menu\r\n            items={this.props.getItems()}\r\n            setData={this.handleChange}\r\n            changeMode={this.changeMode}\r\n            columns\r\n          />\r\n        </div>\r\n\r\n        <div className=\"container columns\">\r\n          <div className=\"container option-viewport\">\r\n            <ViewPort\r\n              data={this.props.data}\r\n              setData={this.handleChange}\r\n              changeMode={this.changeMode}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"container option-info\">\r\n            <Info\r\n              data={this.props.data}\r\n              setData={this.handleChange}\r\n              changeMode={this.changeMode}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nPaymentView.propTypes = {\r\n  setData: PropTypes.func.isRequired,\r\n  getItems: PropTypes.func.isRequired,\r\n  changeMode: PropTypes.func.isRequired,\r\n  data: PropTypes.object.isRequired,\r\n  goBack: PropTypes.func.isRequired,\r\n};\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport ViewPort from '../Viewport';\r\nimport Menu from '../Menu';\r\nimport Info from '../Info';\r\n\r\nexport default class ConfirmationView extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.changeMode = this.changeMode.bind(this);\r\n  }\r\n\r\n  handleChange(data, key) {\r\n    this.props.setData(data, key);\r\n  }\r\n\r\n  changeMode(mode) {\r\n    this.props.changeMode(mode);\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"container\">\r\n        <div className=\"container option-menu\">\r\n          <div className=\"back-button\">\r\n            <button className=\"btn\" onClick={this.props.goBack}>\r\n              Back\r\n            </button>\r\n          </div>\r\n\r\n          <Menu\r\n            items={this.props.getItems()}\r\n            setData={this.handleChange}\r\n            changeMode={this.changeMode}\r\n            columns\r\n          />\r\n        </div>\r\n\r\n        <div className=\"container columns\">\r\n          <div className=\"container option-viewport\">\r\n            <ViewPort\r\n              data={this.props.data}\r\n              setData={this.handleChange}\r\n              changeMode={this.changeMode}\r\n            />\r\n          </div>\r\n\r\n          <div className=\"container option-info\">\r\n            <Info\r\n              data={this.props.data}\r\n              setData={this.handleChange}\r\n              changeMode={this.changeMode}\r\n            />\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nConfirmationView.propTypes = {\r\n  setData: PropTypes.func.isRequired,\r\n  getItems: PropTypes.func.isRequired,\r\n  changeMode: PropTypes.func.isRequired,\r\n  data: PropTypes.object.isRequired,\r\n  goBack: PropTypes.func.isRequired,\r\n};\r\n","class Service {\r\n}\r\n\r\nexport default Service;","import Firebase from 'firebase';\r\nimport 'firebase/firestore';\r\n\r\nconst config = {\r\n  apiKey: \"AIzaSyDAMD7_FNdU0S6u7Yzyo5oo-TUVZND3B14\",\r\n  authDomain: \"abasi-configurator.firebaseapp.com\",\r\n  databaseURL: \"https://abasi-configurator.firebaseio.com\",\r\n  projectId: \"abasi-configurator\",\r\n  storageBucket: \"gs://abasi-configurator\",\r\n  messagingSenderId: \"90569062003\"\r\n};\r\n\r\nFirebase.initializeApp(config);\r\n\r\n// Firebase\r\nexport default Firebase;\r\n\r\n// Auth\r\nexport const Auth = Firebase.auth();\r\nexport const DB = Firebase.firestore();\r\nexport const Storage = Firebase.storage();","import Service from './Service';\r\nimport { DB } from '../firebase';\r\nimport _ from 'lodash';\r\nimport uuid from 'uuid';\r\n\r\nclass ConfigurationService extends Service {\r\n  constructor() {\r\n    super();\r\n    this.clear();\r\n  }\r\n\r\n  clear() {\r\n    this.config = [];\r\n  }\r\n\r\n  loadConfigFromSnapshot(snapshot) {\r\n    this.clear();\r\n\r\n    snapshot.forEach((doc) => {\r\n      const config = doc.data();\r\n      config.id = doc.id;\r\n      this.config.push(config);\r\n    });\r\n\r\n    return this.config;\r\n  }\r\n\r\n  async getConfig() {\r\n    const snapshot = await DB.collection('configuration').get();\r\n    return this.loadConfigFromSnapshot(snapshot);\r\n  }\r\n\r\n  async getAll() {\r\n    const { config } = this;\r\n\r\n    if (!config || !config.length) {\r\n      await this.getConfig();\r\n    }\r\n\r\n    return this.config;\r\n  }\r\n\r\n  async get(id) {\r\n    let config = _.find(this.config, c => c.id === id);\r\n\r\n    if (!config) {\r\n      const doc = await DB.collection('configuration').doc(id).get();\r\n      config = doc.data();\r\n      config.id = id;\r\n      this.config.push(config);\r\n    }\r\n    \r\n    return config;\r\n  }\r\n\r\n  async create(data) {\r\n    if (data.id && typeof data.id === 'string' && data.id !== '') {\r\n      await DB.collection('configuration').doc(data.id).set(data);\r\n      this.config = _.filter(this.config, c => c.id !== data.id);\r\n      this.config.push(data);\r\n      return this.config;\r\n    }\r\n\r\n    delete data.id;\r\n    await DB.collection('configuration').doc().set(data);\r\n    this.config.push(data);\r\n    return this.config;\r\n  }\r\n\r\n  async saveAll(configs) {\r\n    console.log(configs);\r\n    \r\n    try {\r\n      _.each(configs, async c => {\r\n        await DB.collection('configuration').doc(c.id).set(c);\r\n      });\r\n    } catch (ex) {\r\n      console.log(ex);\r\n    }\r\n  }\r\n\r\n  createLineitem(config, item) {\r\n    item.id = uuid.v4().replace(/-/g, '');\r\n    console.log(item.id);\r\n    config.options.push(item);\r\n  }\r\n}\r\n\r\nexport default new ConfigurationService();","import React from 'react';\r\nimport _ from 'lodash';\r\n\r\n// Constants\r\nimport Strings from '../constants/strings';\r\nimport Scale from '../constants/scale';\r\nimport Headstyle from '../constants/headstyle';\r\nimport Modes from '../constants/modes';\r\nimport SelectionTypes from '../constants/selection-types';\r\nimport NewOptions from '../constants/new-options.json';\r\n\r\n// WebGL Renderer\r\nimport Renderer from './Renderer';\r\n\r\n// Views\r\nimport HomeView from './views/HomeView';\r\nimport OptionView from './views/OptionView';\r\nimport PaymentView from './views/PaymentView';\r\nimport ConfirmationView from './views/ConfirmationView';\r\nimport ConfigurationService from '../services/ConfigurationService';\r\n\r\nexport default class Configurator extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    // Initial State\r\n    this.state = {\r\n      items: [[]],\r\n      mode: Modes.HOME,\r\n      price: 0,\r\n      selections: Configurator.getInitialData(),\r\n    };\r\n\r\n    // Event bindings\r\n    this.getItems = this.getItems.bind(this);\r\n    this.makeSelection = this.makeSelection.bind(this);\r\n    this.propogateEvent = this.propogateEvent.bind(this);\r\n    this.evaluatePrice = this.evaluatePrice.bind(this);\r\n\r\n    // Setup components to use for different views\r\n    this.components = {\r\n      [Modes.HOME]: HomeView,\r\n      [Modes.OPTION]: OptionView,\r\n      [Modes.PAYMENT]: PaymentView,\r\n      [Modes.CONFIRMATION]: ConfirmationView,\r\n    };\r\n\r\n    this.renderer = new Renderer(this.state.data);\r\n  }\r\n\r\n  async componentDidMount() {\r\n    // Startup/attach renderer\r\n    this.rendererContainer = document.getElementById('renderer-container');\r\n    this.renderer.container = this.rendererContainer;\r\n\r\n    // Initialize the scene if we haven't already done so\r\n    if (!this.renderer.scene) {\r\n      this.renderer.createScene();\r\n    }\r\n\r\n    this.rendererContainer.appendChild(this.renderer.getRendererElement());\r\n\r\n    // Begin pricing module\r\n    this.evaluatePrice();\r\n\r\n    // Grab configuration items for the user menu\r\n    const items = await ConfigurationService.getConfig();\r\n    this.setState({\r\n      items: [_.sortBy(items, 'position')],\r\n    });\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    // Update/re-attach renderer\r\n    if (this.state.mode !== Modes.CONFIRMATION) {\r\n      this.rendererContainer = document.getElementById('renderer-container');\r\n      this.renderer.container = this.rendererContainer;\r\n      this.rendererContainer.appendChild(this.renderer.getRendererElement());\r\n      this.renderer.resize();\r\n      this.renderer.update(this.state.data);\r\n    }\r\n  }\r\n\r\n  static getInitialData() {\r\n    return {\r\n      body: { price: 50 }\r\n    };\r\n  }\r\n\r\n  async makeSelection(selection) {\r\n    // console.log(selection);\r\n\r\n    // switch (selection.type) {\r\n    //   case SelectionTypes.MENU:\r\n    //     // TODO: Push new items\r\n    //     const { items } = this.state;\r\n    //     items.push(selection.options);\r\n\r\n    //     this.setState({\r\n    //       items\r\n    //     });\r\n    //     break;\r\n    //   case SelectionTypes.MODEL:\r\n    //   case SelectionTypes.MATERIAL:\r\n    //   case SelectionTypes.TEXTURE:\r\n    //     // TODO: Create selection, update price, return to original options\r\n    //     this.performUpdate(selection);\r\n    //   default:\r\n    //     console.log('Expected concrete selection type...');\r\n    //     break;\r\n    // }\r\n  }\r\n\r\n  async performUpdate(selection) {\r\n    // const { selections } = this.state;\r\n    // selections[selection.key] = selection;\r\n\r\n    // this.setState({\r\n    //   selections,\r\n    // });\r\n\r\n    this.evaluatePrice();\r\n  }\r\n\r\n  async evaluatePrice() {\r\n    const price = _.map(this.state.selections, s => s.price).reduce((p, c) => p + c);\r\n    this.setState({\r\n      price,\r\n    })\r\n  }\r\n\r\n  async setData(data, key) {\r\n    // If menu selection, set items and change mode\r\n    // Push items onto menu?\r\n    if (data.collectionId || data.collections) {\r\n      // this.state.mode = Modes.OPTION;\r\n      this.state.items.push(data.collections || data);\r\n      this.state.itemIndex += 1;\r\n      this.propogateItems();\r\n    } else {\r\n      // If product selection, deal with shopify\r\n      if (!key) {\r\n        throw new Error('No item key supplied!');\r\n      }\r\n\r\n      const dataCopy = { ...this.state.data };\r\n      dataCopy[key] = data.handle;\r\n      this.state.data = dataCopy;\r\n\r\n      this.setState({\r\n        data: dataCopy,\r\n      });\r\n\r\n      this.updateCart();\r\n    }\r\n  }\r\n\r\n  getItems() {\r\n    return this.state.items[this.state.items.length - 1];\r\n  }\r\n\r\n  goBack() {\r\n    if (this.state.itemIndex > 0) {\r\n      const itemIndex = this.state.itemIndex - 1;\r\n      // const mode = itemIndex === 0 ? Modes.HOME : Modes.OPTION;\r\n\r\n      // Pop last menu set off\r\n      this.state.items.pop();\r\n\r\n      this.setState({\r\n        itemIndex,\r\n        // mode,\r\n      });\r\n    }\r\n  }\r\n\r\n  // Reset guitar options\r\n  reset() {\r\n    // this.setState({\r\n    //   data: Configurator.getInitialData(),\r\n    // });\r\n  }\r\n\r\n  changeMode(mode) {\r\n    this.setState({\r\n      mode,\r\n    });\r\n  }\r\n\r\n  propogateEvent(event) {\r\n    // TODO: Event handler code for renderer events\r\n    this.renderer.handleEvent(event, this.state.data);\r\n  }\r\n\r\n  render() {\r\n    // TODO: Pre-rendered components?\r\n    const Component = this.components[this.state.mode];\r\n\r\n    if (!Component) {\r\n      throw new Error(`Component missing for mode ${this.state.mode}`);\r\n    }\r\n\r\n    return (\r\n      <div className=\"configurator\">\r\n        {this.getItems() &&\r\n          <Component\r\n            renderer={this.renderer}\r\n            getItems={this.getItems}\r\n            makeSelection={this.makeSelection}\r\n            price={this.state.price}\r\n          />\r\n        }\r\n      </div>\r\n    );\r\n  }\r\n}\r\n","import { toast } from 'react-toastify';\r\nimport { Auth } from '../firebase';\r\n\r\nexport const initUser = () => async (dispatch) => {\r\n  Auth.onAuthStateChanged((user) => {\r\n    // Only dispatch event if user is defined\r\n    // Logout will handle nullifying user\r\n    if (user) {\r\n      dispatch({\r\n        type: 'LOGIN',\r\n        payload: user,\r\n      });\r\n    }\r\n  });\r\n};\r\n\r\nexport const login = (email, password) => async (dispatch) => {\r\n  Auth.signInWithEmailAndPassword(email, password).then((result) => {\r\n    const { user } = result;\r\n\r\n    toast.success('You have logged in');\r\n\r\n    dispatch({\r\n      type: 'LOGIN',\r\n      payload: user,\r\n    });\r\n  }).catch((ex) => {\r\n    console.log(ex);\r\n\r\n    toast.error('Unathorized');\r\n  });\r\n};\r\n\r\nexport const logout = () => async (dispatch) => {\r\n  Auth.signOut().then(() => {\r\n    toast.success('You have logged out');\r\n\r\n    dispatch({\r\n      type: 'LOGOUT',\r\n    });\r\n  });\r\n};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nimport * as actions from '../actions/auth';\r\n\r\nconst Header = ({ user, logout }) => (\r\n  <div className=\"app-bar\">\r\n    <Link to=\"/\" className=\"brand-logo\">\r\n      <img src=\"/logo.png\" alt=\"Abasi Logo\" />\r\n    </Link>\r\n\r\n    {user && (\r\n      <span className=\"app-actions\">\r\n        <span className=\"active-user\">\r\n          {user.email}\r\n        </span>\r\n        \r\n        <button className=\"abasi-logout\" onClick={logout}>\r\n          Logout\r\n        </button>\r\n      </span>\r\n    )}\r\n  </div>\r\n);\r\n\r\nHeader.propTypes = {\r\n  user: PropTypes.object,\r\n  logout: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default connect(\r\n  null,\r\n  actions,\r\n)(Header);\r\n","import React from 'react';\r\nimport { slide as Menu } from 'react-burger-menu';\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass Sidebar extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      open: false,\r\n    };\r\n\r\n    this.toggle = this.toggle.bind(this);\r\n  }\r\n\r\n  toggle(e) {\r\n    e.preventDefault();\r\n    this.setState({\r\n      open: !this.state.open,\r\n    });\r\n  }\r\n\r\n  showSettings(event) {\r\n    event.preventDefault();\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <Menu\r\n        isOpen={this.state.open}\r\n        pageWrapId={ 'app-body' }\r\n        outerContainerId={ 'app-container' }\r\n        disableAutoFocus \r\n      >\r\n        <Link to=\"/\" className=\"menu-logo\">\r\n          <img src=\"/logo.png\" alt=\"Abasi Logo\" />\r\n        </Link>\r\n\r\n        <Link to=\"/\">\r\n          Home\r\n        </Link>\r\n\r\n        <Link to=\"/orders\">\r\n          Orders\r\n        </Link>\r\n\r\n        <Link to=\"/assets\">\r\n          Asset Management\r\n        </Link>\r\n\r\n        <Link to=\"/config\">\r\n          Configuration Management\r\n        </Link>\r\n\r\n        <Link to=\"/archive\">\r\n          Archive Current Configuration\r\n        </Link>\r\n\r\n        {/* <a onClick={ this.showSettings } className=\"menu-item--small\" href=\"\">Settings</a> */}\r\n      </Menu>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Sidebar;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { withRouter } from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\nimport * as actions from '../actions/auth';\r\n\r\nclass Welcome extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      email: '',\r\n      password: '',\r\n    }\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.login = this.login.bind(this);\r\n  }\r\n\r\n  login(event) {\r\n    this.props.login(this.state.email, this.state.password);\r\n    event.preventDefault();\r\n  }\r\n\r\n  handleChange(event) {\r\n    const { name, value } = event.target;\r\n\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"flex columns abasi-login\">\r\n        <h1 className=\"login-header\">Login</h1>\r\n\r\n        <form onSubmit={this.login}>\r\n          <div className=\"flex columns\">\r\n            <input className=\"abasi-input\"\r\n              type=\"text\"\r\n              name=\"email\"\r\n              placeholder=\"Email\"\r\n              value={this.state.email} \r\n              onChange={this.handleChange}\r\n            />\r\n\r\n            <input className=\"abasi-input\"\r\n              type=\"password\"\r\n              name=\"password\"\r\n              placeholder=\"Password\"\r\n              value={this.state.password} \r\n              onChange={this.handleChange}\r\n            />\r\n\r\n            <button type=\"submit\" className=\"btn abasi-login-button\">\r\n              Login\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nWelcome.propTypes = {\r\n  login: PropTypes.func.isRequired,\r\n};\r\n\r\nexport default withRouter(connect(\r\n  null,\r\n  actions,\r\n)(Welcome));\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Link } from 'react-router-dom';\r\n\r\nconst Tile = ({ url, title }) => (\r\n  <Link to={url}>\r\n    <div className=\"abasi-tile\">\r\n      <span className=\"abasi-tile-label\">\r\n        { title }\r\n      </span>\r\n    </div>\r\n  </Link>\r\n);\r\n\r\nTile.propTypes = {\r\n  title: PropTypes.string.isRequired,\r\n  url: PropTypes.string.isRequired,\r\n};\r\n\r\nexport default Tile;\r\n","import React from 'react';\r\nimport Tile from './Tile';\r\n\r\nconst Home = () => (\r\n  <div className=\"abasi-dashboard flex\">\r\n    <div className=\"abasi-dashboard-tiles flex\">\r\n      <Tile title=\"Orders\" url=\"/orders\" />\r\n      <Tile title=\"Manage Assets\" url=\"/assets\" />\r\n      <Tile title=\"Manage Active Config\" url=\"/config\" />\r\n      <Tile title=\"Statistics Dashboard\" url=\"/statistics\" />\r\n    </div>\r\n  </div>\r\n);\r\n\r\nexport default Home;\r\n","import Service from './Service';\r\nimport { DB } from '../firebase';\r\nimport _ from 'lodash';\r\n\r\nclass OrderService extends Service {\r\n  constructor() {\r\n    super();\r\n    this.clear();\r\n  }\r\n\r\n  clear() {\r\n    this.orders = [];\r\n  }\r\n\r\n  loadOrdersFromSnapshot(snapshot) {\r\n    snapshot.forEach((doc) => {\r\n      const order = doc.data();\r\n      order.id = doc.id;\r\n      this.orders.push(order);\r\n    });\r\n  }\r\n\r\n  async getOrders() {\r\n    const snapshot = await DB.collection('orders').get();\r\n    this.loadOrdersFromSnapshot(snapshot);\r\n  }\r\n\r\n  async getAll() {\r\n    const { orders } = this;\r\n\r\n    if (!orders || !orders.length) {\r\n      await this.getOrders();\r\n    }\r\n\r\n    return this.orders;\r\n  }\r\n\r\n  async get(id) {\r\n    let order = _.find(this.orders, o => o.id === id);\r\n\r\n    if (!order) {\r\n      const doc = await DB.collection('orders').doc(id).get();\r\n      order = doc.data();\r\n      order.id = id;\r\n      this.orders.push(order);\r\n    }\r\n    \r\n    return order;\r\n  }\r\n\r\n  async updateNotes(order) {\r\n    await DB.collection('orders').doc(order.id).set(order);\r\n  }\r\n}\r\n\r\nexport default new OrderService();","import React from 'react';\r\nimport _ from 'lodash';\r\nimport { Link } from 'react-router-dom';\r\nimport OrderService from '../../services/OrderService';\r\nimport { ClipLoader } from 'react-spinners';\r\n\r\nclass Orders extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      orders: null,\r\n    };\r\n\r\n    this.getOrders();\r\n  }\r\n\r\n  async getOrders() {\r\n    const orders = await OrderService.getAll();\r\n    console.log(orders);\r\n    this.setState({\r\n      orders,\r\n    });\r\n  }\r\n\r\n  getOrderContent(order) {\r\n    return (\r\n      <tr className=\"abasi-orders-row\">\r\n        <td>{ order.orderNumber }</td>\r\n        <td>{ order.id }</td>\r\n        <td>${ order.total }</td>\r\n        <td>{ order.status }</td>\r\n\r\n        <td>\r\n          <Link to={`/orders/${order.id}`}>\r\n            View Order\r\n          </Link>\r\n        </td>\r\n      </tr>\r\n    );\r\n  }\r\n\r\n  getDefaultContent() {\r\n    return (\r\n      <div className=\"flex columns abasi-orders-spinner\">\r\n        <h1>Retrieving Orders</h1>\r\n        <ClipLoader />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getOrdersContent(orders) {\r\n    const orderContent = _.map(orders, this.getOrderContent);\r\n\r\n    return (\r\n      <div className=\"abasi-orders flex columns\">\r\n        <span className=\"abasi-orders-header\">\r\n          Orders\r\n        </span>\r\n  \r\n        <table className=\"abasi-orders-table abasi-table\" border=\"1\" frame=\"void\" rules=\"rows\">\r\n          <thead>\r\n            <tr>\r\n              <th>Order Number</th>\r\n              <th>Invoice ID</th>\r\n              <th>Total</th>\r\n              <th>Payment Status</th>\r\n              <th>Order Link</th>\r\n            </tr>\r\n          </thead>\r\n  \r\n          <tbody>\r\n            { orderContent }\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { orders } = this.state;\r\n\r\n    if (orders) {\r\n      return this.getOrdersContent(orders);\r\n    }\r\n    \r\n    return this.getDefaultContent();\r\n  }\r\n}\r\n\r\nexport default Orders;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport _ from 'lodash';\r\n// import { toast } from 'react-toastify';\r\n// import { Link } from 'react-router-dom';\r\nimport OrderService from '../../services/OrderService';\r\nimport { ClipLoader } from 'react-spinners';\r\nimport { toast } from 'react-toastify';\r\n\r\nclass OrderListing extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      order: null,\r\n      pristineBuilderNotes: true,\r\n    };\r\n\r\n    this.handleBuilderNotes = this.handleBuilderNotes.bind(this);\r\n    this.saveBuilderNotes = this.saveBuilderNotes.bind(this);\r\n\r\n    this.getOrder();\r\n  }\r\n\r\n  async getOrder() {\r\n    const order = await OrderService.get(this.props.match.params.id);\r\n    this.setState({\r\n      order,\r\n    });\r\n  }\r\n\r\n  handleBuilderNotes(event) {\r\n    event.preventDefault();\r\n\r\n    const { order } = this.state;\r\n    order.builderNotes = event.target.value;\r\n    \r\n    this.setState({\r\n      order,\r\n      pristineBuilderNotes: false,\r\n    });\r\n  }\r\n\r\n  async saveBuilderNotes(event) {\r\n    event.preventDefault();\r\n\r\n    await OrderService.updateNotes(this.state.order);\r\n    toast.success('Successfully saved builder notes');\r\n    this.setState({\r\n      pristineBuilderNotes: true,\r\n    })\r\n  }\r\n\r\n  getSpecs(specs) {\r\n    return _.map(specs, (spec) => {\r\n      return (\r\n        <div className=\"spec\" key={spec.id}>\r\n          <span className=\"title\">\r\n            { spec.title }\r\n          </span>\r\n\r\n          <span className=\"price\">\r\n            ${ spec.price }\r\n          </span>\r\n        </div>\r\n      );\r\n    });\r\n  }\r\n\r\n  getPurchaserInfo(purchaser) {\r\n    return (\r\n      <div className=\"purchaser-info\">\r\n        <div className=\"item name\">\r\n          <span className=\"label\">Purchaser Name:</span>\r\n          <span className=\"value\">{ purchaser.firstName } { purchaser.lastName }</span>\r\n        </div>\r\n\r\n        <div className=\"item email\">\r\n          <span className=\"label\">Purchaser Email:</span>\r\n          <span className=\"value\">\r\n            <a href={`mailto:${purchaser.email}`} className=\"purchaser-email-link\">\r\n              { purchaser.email }\r\n            </a>\r\n          </span>\r\n        </div>\r\n\r\n        <div className=\"item address\">\r\n          <span className=\"label\">Purchaser Address:</span>\r\n          <span className=\"value\">{ purchaser.address.full }</span>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getDefaultContent() {\r\n    return (\r\n      <div className=\"flex columns abasi-order-listing-spinner\">\r\n        <h1>Retrieving Order</h1>\r\n        <ClipLoader />\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getOrderContent(order, specs, purchaserInfo) {\r\n    return (\r\n      <div className=\"abasi-order-listing flex columns\">\r\n        <h1 className=\"order-header\">\r\n          Order #{order.orderNumber}\r\n        </h1>\r\n\r\n        <a target=\"_blank\" rel=\"noopener noreferrer\" href={order.configuratorUrl} className=\"configurator-link\">\r\n          Configurator Link\r\n        </a>\r\n\r\n        <div className=\"flex order-info-wrapper\">\r\n          <div className=\"order-info\">\r\n            <div className=\"item invoice\">\r\n              <span className=\"label\">Invoice ID:</span>\r\n              <span className=\"value\">{order.id}</span>\r\n            </div>\r\n\r\n            <div className=\"item total\">\r\n              <span className=\"label\">Total:</span>\r\n              <span className=\"value\">${order.total}</span>\r\n            </div>\r\n\r\n            <div className=\"item status\">\r\n              <span className=\"label\">Order Status:</span>\r\n              <span className=\"value\">{order.status}</span>\r\n            </div>\r\n\r\n            <div className=\"item payment-type\">\r\n              <span className=\"label\">Payment Type:</span>\r\n              <span className=\"value\">{order.paymentType}</span>\r\n            </div>\r\n\r\n            <div className=\"item stripe-id\">\r\n              <span className=\"label\">Stripe Transaction:</span>\r\n              <span className=\"value\">\r\n                <a href=\"strip.com\" target=\"_blank\" className=\"stripe-link\">\r\n                  {order.transactionId}\r\n                </a>\r\n              </span>\r\n            </div>\r\n          </div>\r\n\r\n          { purchaserInfo }\r\n        </div>\r\n\r\n        <div className=\"flex builder-info-wrapper\">\r\n          <div className=\"specs\">\r\n            { specs }\r\n          </div>\r\n\r\n          <div className=\"builder-notes\">\r\n            <h1>Builder Notes</h1>\r\n            <p>Notes about the order for internal use only.</p>\r\n            <textarea value={order.builderNotes} onChange={this.handleBuilderNotes} />\r\n\r\n            <button disabled={this.state.pristineBuilderNotes} className=\"builder-notes-save-button btn\" onClick={this.saveBuilderNotes}>\r\n              Save\r\n            </button>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"flex order-actions\">\r\n          <h1>Order Actions</h1>\r\n\r\n          <button disabled className=\"btn order-action delete\">\r\n            Delete Order\r\n          </button>\r\n\r\n          { order.paymentType === 'Deposit' &&\r\n            <button className=\"btn order-action paid\">\r\n              Payment Complete\r\n            </button>\r\n          }\r\n\r\n          <button className=\"btn order-action fulfill\">\r\n            Fulfill Order\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { order } = this.state;\r\n\r\n    if (order) {\r\n      const specs = this.getSpecs(order.specs);\r\n      const purchaserInfo = this.getPurchaserInfo(order.purchaserInfo);\r\n      return this.getOrderContent(order, specs, purchaserInfo);\r\n    } else {\r\n      return this.getDefaultContent(order);\r\n    }\r\n  }\r\n}\r\n\r\nOrderListing.propTypes = {\r\n  match: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default OrderListing;","import Service from './Service';\r\nimport uuid from 'uuid';\r\nimport { DB, Storage } from '../firebase';\r\n\r\nclass AssetService extends Service {\r\n  constructor() {\r\n    super();\r\n    this.clear();\r\n  }\r\n\r\n  clear() {\r\n    this.assets = {};\r\n    this.modelMetadata = [];\r\n    this.textureMetadata = [];\r\n  }\r\n\r\n  async createModel(filename, size) {\r\n    const data = {\r\n      id: uuid.v4().replace(/-/g, ''),\r\n      filename: filename,\r\n      size: size,\r\n    };\r\n\r\n    await DB.collection('models').doc(data.id).set(data);\r\n  }\r\n\r\n  async createTexture(filename, size) {\r\n    const data = {\r\n      id: uuid.v4().replace(/-/g, ''),\r\n      filename: filename,\r\n      size: size,\r\n    };\r\n\r\n    await DB.collection('textures').doc(data.id).set(data);\r\n  }\r\n\r\n  async getModelMetadata() {\r\n    const { modelMetadata } = this;\r\n\r\n    if (modelMetadata && modelMetadata.length) {\r\n      return modelMetadata;\r\n    }\r\n\r\n    const snapshot = await DB.collection('models').get();\r\n    snapshot.forEach((doc) => {\r\n      const model = doc.data();\r\n      model.id = doc.id;\r\n      this.modelMetadata.push(model);\r\n    });\r\n\r\n    return this.modelMetadata;\r\n  }\r\n\r\n  async getTextureMetadata() {\r\n    const { textureMetadata } = this;\r\n\r\n    if (textureMetadata && textureMetadata.length) {\r\n      return textureMetadata;\r\n    }\r\n\r\n    const snapshot = await DB.collection('textures').get();\r\n    snapshot.forEach((doc) => {\r\n      const texture = doc.data();\r\n      texture.id = doc.id;\r\n      this.textureMetadata.push(texture);\r\n    });\r\n\r\n    return this.textureMetadata;\r\n  }\r\n\r\n  async removeTexture(texture) {\r\n    await DB.collection('textures').doc(texture).delete();\r\n  }\r\n\r\n  async removeModel(model) {\r\n    await DB.collection('models').doc(model).delete();    \r\n  }\r\n}\r\n\r\nexport default new AssetService();","import React from 'react';\r\nimport { Tab, Tabs, TabList, TabPanel } from 'react-tabs';\r\nimport AssetService from '../../services/AssetService';\r\nimport _ from 'lodash';\r\nimport { toast } from 'react-toastify';\r\nimport { ClipLoader } from 'react-spinners';\r\nimport { Storage } from '../../firebase';\r\nimport FileUploader from \"react-firebase-file-uploader\";\r\n\r\nclass ManageAssets extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      loading: true,\r\n      uploading: false,\r\n      assets: null,\r\n      models: null,\r\n    };\r\n\r\n    this.getMetadata = this.getMetadata.bind(this);\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.deleteModel = this.deleteModel.bind(this);\r\n    this.deleteTexture = this.deleteTexture.bind(this);\r\n    this.getTextureAssetContent = this.getTextureAssetContent.bind(this);\r\n    this.getModelAssetContent = this.getModelAssetContent.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getMetadata();\r\n  }\r\n\r\n  async getMetadata() {\r\n    // TODO: Load in asset metadata from the GS bucket\r\n    const textureMetadata = await AssetService.getTextureMetadata();\r\n    const modelMetadata = await AssetService.getModelMetadata();\r\n\r\n    console.log(textureMetadata);\r\n\r\n    this.setState({\r\n      loading: false,\r\n      textureMetadata,\r\n      modelMetadata,\r\n    });\r\n  }\r\n\r\n  async deleteTexture(texture) {\r\n    await AssetService.removeTexture(texture);\r\n    toast.success('Successfully removed texture');\r\n  }\r\n\r\n  async deleteModel(model) {\r\n    await AssetService.removeModel(model);\r\n    toast.success('Successfully removed model');\r\n  }\r\n\r\n  handleUploadStart = () => this.setState({ uploading: true, progress: 0 });\r\n\r\n  handleProgress = progress => this.setState({ progress });\r\n\r\n  handleUploadError = error => {\r\n    this.setState({ uploading: false });\r\n    toast.error(error);\r\n  };\r\n\r\n  handleModelUploadSuccess = async (filename, task) => {\r\n    await AssetService.createModel(filename, task.metadata_.size);\r\n\r\n    this.setState({ progress: 100, uploading: false });\r\n    toast.success('Model uploaded successfully');\r\n  };\r\n\r\n  handleTextureUploadSuccess = async (filename, task) => {\r\n    await AssetService.createTexture(filename, task.metadata_.size);\r\n\r\n    this.setState({ progress: 100, uploading: false });\r\n    toast.success('Texture uploaded successfully');\r\n  };\r\n\r\n  handleChange(event) {\r\n    const { name, value } = event.target;\r\n\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  }\r\n\r\n  getTextureAssetContent(asset) {\r\n    return (\r\n      <tr className=\"abasi-assets-row\" key={asset.id}>\r\n        <td>{ asset.filename }</td>\r\n        <td>{ asset.id }</td>\r\n        <td>{ asset.size }</td>\r\n\r\n        <td>\r\n          <button className=\"abasi-assets-table-button\" onClick={() => { this.deleteTexture(asset.id) }}>\r\n            Delete Asset\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    );\r\n  }\r\n\r\n  getModelAssetContent(asset) {\r\n    return (\r\n      <tr className=\"abasi-assets-row\" key={asset.id}>\r\n        <td>{ asset.filename }</td>\r\n        <td>{ asset.id }</td>\r\n        <td>{ asset.size }</td>\r\n\r\n        <td>\r\n          <button className=\"abasi-assets-table-button\" onClick={() => { this.deleteModel(asset.id) }}>\r\n            Delete Asset\r\n          </button>\r\n        </td>\r\n      </tr>\r\n    );\r\n  }\r\n\r\n  getManageContent() {\r\n    const { loading } = this.state;\r\n\r\n    if (loading) {\r\n      return (\r\n        <div className=\"abasi-manage-assets loading flex columns\">\r\n          <ClipLoader />\r\n          <p>Loading asset metadata...</p>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    const textureContent = _.map(this.state.textureMetadata, this.getTextureAssetContent);\r\n    const modelContent = _.map(this.state.modelMetadata, this.getModelAssetContent);\r\n\r\n    return (\r\n      <div className=\"abasi-manage-assets flex columns\">\r\n        <h1>Manage Textures</h1>\r\n  \r\n        <table className=\"abasi-assets-table abasi-table\" border=\"1\" frame=\"void\" rules=\"rows\">\r\n          <thead>\r\n            <tr>\r\n              <th>Asset Name</th>\r\n              <th>Asset ID</th>\r\n              <th>File Size</th>\r\n              <th>Delete Asset</th>\r\n            </tr>\r\n          </thead>\r\n  \r\n          <tbody>\r\n            { textureContent }\r\n          </tbody>\r\n        </table>\r\n\r\n        <h1>Manage Models</h1>\r\n\r\n        <table className=\"abasi-assets-table abasi-table\" border=\"1\" frame=\"void\" rules=\"rows\">\r\n          <thead>\r\n            <tr>\r\n              <th>Asset Name</th>\r\n              <th>Asset ID</th>\r\n              <th>File Size</th>\r\n              <th>Delete Asset</th>\r\n            </tr>\r\n          </thead>\r\n  \r\n          <tbody>\r\n            { modelContent }\r\n          </tbody>\r\n        </table>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getModelContent() {\r\n    return (\r\n      <div className=\"abasi-upload-model flex columns\">\r\n        <h1>Upload Model</h1>\r\n        \r\n        <label htmlFor=\"model\">\r\n          <span className=\"label\">\r\n            Choose File: \r\n          </span>\r\n\r\n          <FileUploader\r\n            accept=\".fbx,.obj\"\r\n            name=\"model\"\r\n            storageRef={Storage.ref('models')}\r\n            onUploadStart={this.handleUploadStart}\r\n            onUploadError={this.handleUploadError}\r\n            onUploadSuccess={this.handleModelUploadSuccess}\r\n            onProgress={this.handleProgress}\r\n          />\r\n        </label>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  getTextureContent() {\r\n    return (\r\n      <div className=\"abasi-upload-texture flex columns\">\r\n        <h1>Upload Texture</h1>\r\n        \r\n        <label htmlFor=\"texture\">\r\n          <span className=\"label\">\r\n            Choose File: \r\n          </span>\r\n\r\n          <FileUploader\r\n            accept=\"image/*\"\r\n            name=\"texture\"\r\n            storageRef={Storage.ref('textures')}\r\n            onUploadStart={this.handleUploadStart}\r\n            onUploadError={this.handleUploadError}\r\n            onUploadSuccess={this.handleTextureUploadSuccess}\r\n            onProgress={this.handleProgress}\r\n          />\r\n        </label>\r\n      </div>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    return (\r\n      <div className=\"flex columns abasi-assets\">\r\n        <h1>Asset Management</h1>\r\n\r\n        <Tabs>\r\n          <TabList>\r\n            <Tab>Manage Assets</Tab>\r\n            <Tab>Upload Model</Tab>\r\n            <Tab>Upload Texture</Tab>\r\n          </TabList>\r\n\r\n          <TabPanel>\r\n            { this.getManageContent() }\r\n          </TabPanel>\r\n\r\n          <TabPanel>\r\n            { this.getModelContent() }\r\n          </TabPanel>\r\n\r\n          <TabPanel>\r\n            { this.getTextureContent() }\r\n          </TabPanel>\r\n        </Tabs>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ManageAssets;\r\n","import React from 'react';\r\nimport ConfigurationService from '../../services/ConfigurationService';\r\nimport _ from 'lodash';\r\nimport { toast } from 'react-toastify';\r\nimport { ClipLoader } from 'react-spinners';\r\nimport { Link } from 'react-router-dom';\r\n\r\nclass ManageConfiguration extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      saving: false,\r\n      config: null,\r\n    };\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.getLineitem = this.getLineitem.bind(this);\r\n    this.moveUp = this.moveUp.bind(this);\r\n    this.moveDown = this.moveDown.bind(this);\r\n    this.save = this.save.bind(this);\r\n    this.sort = this.sort.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    this.getConfiguration();\r\n  }\r\n\r\n  async getConfiguration() {\r\n    const config = await ConfigurationService.getAll();\r\n    this.sort(config);\r\n  }\r\n\r\n  sort(config) {\r\n    config = _.sortBy(config, (c) => Number.parseInt(c.position));\r\n\r\n    this.setState({\r\n      config,\r\n    })\r\n  }\r\n\r\n  handleChange(event) {\r\n    const { name, value } = event.target;\r\n\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  }\r\n\r\n  async save() {\r\n    console.log('Saving...');\r\n    this.setState({\r\n      saving: true,\r\n    });\r\n\r\n    await ConfigurationService.saveAll(this.state.config);\r\n    toast.success('Successfully saved configuration');\r\n    this.setState({\r\n      saving: false,\r\n    });\r\n  }\r\n\r\n  moveUp(id) {\r\n    const { config } = this.state;\r\n\r\n    if (config) {\r\n      const c = _.find(config, c => c.id === id);\r\n      c.position = Number.parseInt(c.position);\r\n      c.position--;\r\n\r\n      this.sort(config);\r\n    } else {\r\n      console.log('Something horrible is happening');\r\n    }\r\n  }\r\n\r\n  moveDown(id) {\r\n    const { config } = this.state;\r\n\r\n    if (config) {\r\n      const c = _.find(config, c => c.id === id);\r\n      c.position = Number.parseInt(c.position);\r\n      c.position++;\r\n\r\n      this.sort(config);\r\n    } else {\r\n      console.log('Something horrible is happening');\r\n    }\r\n  }\r\n\r\n  getLineitem(config) {\r\n    const options = config.options ? config.options.length : 0;\r\n    const configUrl = `/edit-config/${config.id}`;\r\n\r\n    return (\r\n      <tr className=\"abasi-config-item\" key={config.id}>\r\n        <td className=\"position\">{ config.position }.</td>\r\n        <td className=\"title\">{ config.title }</td>\r\n        <td className=\"type\">{ config.type}</td>\r\n        <td className=\"key\">{ config.key}</td>\r\n        <td className=\"options\">{ options } Subitems</td>\r\n        <td className=\"shuffle\">\r\n          <button className=\"move up\" onClick={() => this.moveUp(config.id)}>\r\n            <i className=\"fa fa-arrow-up\"></i>\r\n          </button>\r\n\r\n          <button className=\"move down\" onClick={() => this.moveDown(config.id)}>\r\n            <i className=\"fa fa-arrow-down\"></i>\r\n          </button>\r\n        </td>\r\n        <td>\r\n          <Link to={configUrl}>\r\n            Edit\r\n          </Link>\r\n        </td>\r\n      </tr>\r\n    );\r\n  }\r\n  \r\n  getConfigContent(config) {\r\n    const lineitems = _.map(config, this.getLineitem);\r\n\r\n    return (\r\n      <table className=\"abasi-config-items abasi-table\" border=\"1\" frame=\"void\" rules=\"rows\">\r\n        <thead className=\"abasi-config-item\">\r\n          <tr>\r\n            <th className=\"position\">#</th>\r\n            <th className=\"title\">Title</th>\r\n            <th className=\"type\">Type</th>\r\n            <th className=\"key\">Key</th>\r\n            <th className=\"options\">Options</th>\r\n            <th className=\"shuffle\">Move</th>\r\n            <th>Edit</th>\r\n          </tr>\r\n        </thead>\r\n\r\n        <tbody>\r\n          { lineitems }\r\n        </tbody>\r\n      </table>\r\n    );\r\n  }\r\n\r\n  render() {\r\n    const { config, saving } = this.state;\r\n    let content;\r\n\r\n    if (config && config.length) {\r\n      content = this.getConfigContent(config);\r\n    } else {\r\n      content = (\r\n        <span className=\"flex columns loading\">\r\n          <ClipLoader />\r\n          <p>Loading Configuration</p>\r\n        </span>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"flex columns abasi-config\">\r\n        <h1>Configuration Management</h1>\r\n\r\n        <Link to=\"/add-config\">\r\n          <button className=\"add-config\">\r\n            Add Configuration Item\r\n          </button>\r\n        </Link>\r\n\r\n        <div className=\"flex columns abasi-config-wrapper\">\r\n          { content }\r\n        </div>\r\n\r\n        <button disabled={saving} className=\"abasi-save-config\" onClick={this.save}>\r\n          { saving && \r\n            <ClipLoader />\r\n          }\r\n\r\n          { !saving && \r\n            <span>Save Configuration</span>\r\n          }\r\n        </button>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default ManageConfiguration;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport _ from 'lodash';\r\n\r\nclass LineItem extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      ...this.props.data,\r\n      metadata: this.props.metadata,\r\n    };\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n  }\r\n\r\n  handleChange(event) {\r\n    const { name, value } = event.target;\r\n\r\n    this.setState({\r\n      [name]: value,\r\n    });\r\n  }\r\n\r\n  render() {\r\n    const data = this.state;\r\n\r\n    if (data.maskFields) {\r\n      return (\r\n        <div className=\"flex abasi-lineitem\">\r\n          <div className=\"name\">\r\n            Name\r\n          </div>\r\n          \r\n          <div className=\"price\">\r\n            Price\r\n          </div>\r\n\r\n          <div className=\"asset\">\r\n            Asset\r\n          </div>\r\n\r\n          <div className=\"delete\">\r\n            Delete\r\n          </div>\r\n        </div>\r\n      );\r\n    }\r\n\r\n    return (\r\n      <div className=\"flex abasi-lineitem\">\r\n        <div className=\"name\">\r\n          <input className=\"\"\r\n            type=\"text\"\r\n            name=\"name\"\r\n            placeholder=\"Name\"\r\n            value={data.name} \r\n            onChange={this.handleChange}\r\n          />\r\n        </div>\r\n        \r\n        <div className=\"price\">\r\n          <input className=\"\"\r\n            type=\"number\"\r\n            name=\"asset\"\r\n            value={data.price}\r\n            onChange={this.handleChange}\r\n          />\r\n        </div>\r\n\r\n        <div className=\"asset\">\r\n          <select name=\"asset\" value={data.asset} className=\"\" onChange={this.handleChange}>\r\n            { _.map(data.metadata, m => <option value={m.id}>{m.filename}</option>)}\r\n          </select>\r\n        </div>\r\n\r\n        <div className=\"delete\">\r\n          <button className=\"btn\" type=\"button\" onClick={() => { this.props.delete(data) }}>\r\n            Delete\r\n          </button>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nLineItem.propTypes = {\r\n  delete: PropTypes.func,\r\n  metadata: PropTypes.array.isRequired,\r\n};\r\n\r\nexport default LineItem;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { toast } from 'react-toastify';\r\nimport { ClipLoader } from 'react-spinners';\r\nimport { Link } from 'react-router-dom';\r\nimport _ from 'lodash';\r\n\r\nimport ConfigurationService from '../../services/ConfigurationService';\r\nimport AssetService from '../../services/AssetService';\r\nimport LineItem from './LineItem';\r\n\r\nclass AddConfiguration extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    const id = this.props.match ? this.props.match.params.id : undefined;\r\n\r\n    this.state = {\r\n      editing: id || false,\r\n      loading: id || false,\r\n      config: {\r\n        id: undefined,\r\n        title: undefined,\r\n        description: undefined,\r\n        type: 'texture',\r\n        position: 99,\r\n        key: undefined,\r\n        options: [],\r\n      },\r\n      metadata: [],\r\n    };\r\n\r\n    this.handleChange = this.handleChange.bind(this);\r\n    this.save = this.save.bind(this);\r\n    this.getConfiguration = this.getConfiguration.bind(this);\r\n    this.addLineItem = this.addLineItem.bind(this);\r\n    this.removeLineItem = this.removeLineItem.bind(this);\r\n  }\r\n\r\n  componentDidMount() {\r\n    if (this.props.match && this.props.match.params.id) {\r\n      this.getConfiguration(this.props.match.params.id);\r\n    }\r\n  }\r\n\r\n  async getConfiguration(id) {\r\n    const config = await ConfigurationService.get(id);\r\n\r\n    let metadata;\r\n\r\n    console.log(config.type);\r\n    switch (config.type) {\r\n      case 'model':\r\n        metadata = await AssetService.getModelMetadata();\r\n        break;\r\n      case 'texture':\r\n        metadata = await AssetService.getTextureMetadata();\r\n        break;\r\n      default:\r\n        break;\r\n    }\r\n\r\n    this.setState({\r\n      config,\r\n      metadata,\r\n      loading: false,\r\n    });\r\n  }\r\n\r\n  handleChange(event) {\r\n    const { name, value } = event.target;\r\n    const { config } = this.state;\r\n    config[name] = value;\r\n\r\n    this.setState({\r\n      config,\r\n    });\r\n  }\r\n\r\n  async save(event) {\r\n    event.preventDefault();\r\n\r\n    const { title, description, key } = this.state.config;\r\n\r\n    if (!title || !description || !key) {\r\n      return toast.error('Must provide title, description, and key');\r\n    }\r\n\r\n    await ConfigurationService.create(this.state.config);\r\n    toast.success('Successfully saved configuration item!');\r\n\r\n    this.props.history.push('/config');\r\n  }\r\n\r\n  addLineItem() {\r\n    const { config } = this.state;\r\n    ConfigurationService.createLineitem(config, {});\r\n    \r\n    this.setState({\r\n      config,\r\n    });\r\n  }\r\n\r\n  removeLineItem(item) {\r\n    const { config } = this.state;\r\n    config.options = _.filter(config.options, o => o.id !== item.id);\r\n\r\n    this.setState({ \r\n      config,\r\n    });\r\n  }\r\n\r\n  getLineItems(items) {\r\n    // Magic for first configuration item\r\n    items = [{\r\n      maskFields: true,\r\n    }, ...items];\r\n\r\n    return _.map(items, item => <LineItem data={item} key={`lineitem-${item.name}`} delete={this.removeLineItem} metadata={this.state.metadata} />);\r\n  }\r\n  \r\n  render() {\r\n    const { loading, editing, config } = this.state;\r\n\r\n    if (loading) {\r\n      return (\r\n        <div className=\"abasi-add flex columns\">\r\n          <ClipLoader />\r\n          Loading Configuration...\r\n        </div>\r\n      )\r\n    }\r\n\r\n    const lineitems = this.getLineItems(config.options);\r\n\r\n    return (\r\n      <div className=\"abasi-add flex columns\">\r\n        { editing &&\r\n          <h1>Edit Configuration Item</h1>\r\n        }\r\n\r\n        {!editing &&\r\n          <h1>Add Configuration Item</h1>\r\n        }\r\n\r\n        <Link to=\"/config\">\r\n          <button className=\"btn back-button\">\r\n            Back to configuration\r\n          </button>\r\n        </Link>\r\n\r\n        <form onSubmit={this.save} className=\"flex\">\r\n          <div className=\"flex columns\">\r\n            <label htmlFor=\"title\">\r\n              <span className=\"label\">Title:</span>\r\n\r\n              <input className=\"abasi-input\"\r\n                type=\"text\"\r\n                name=\"title\"\r\n                placeholder=\"Title\"\r\n                value={config.title} \r\n                onChange={this.handleChange}\r\n              />\r\n            </label>\r\n\r\n            <label htmlFor=\"description\">\r\n              <span className=\"label\">Description:</span>\r\n\r\n              <input className=\"abasi-input\"\r\n                type=\"text\"\r\n                name=\"description\"\r\n                placeholder=\"Description\"\r\n                value={config.description} \r\n                onChange={this.handleChange}\r\n              />\r\n            </label>\r\n\r\n            <label htmlFor=\"key\">\r\n              <span className=\"label\">Key:</span>\r\n\r\n              <input className=\"abasi-input\"\r\n                type=\"text\"\r\n                name=\"key\"\r\n                placeholder=\"Key\"\r\n                value={config.key} \r\n                onChange={this.handleChange}\r\n              />\r\n            </label>\r\n\r\n            <label htmlFor=\"type\">\r\n              <span className=\"label\">Configuration Type:</span>\r\n\r\n              <select name=\"type\" value={config.type} className=\"abasi-input\" onChange={this.handleChange}>\r\n                <option value=\"texture\">Texture</option>\r\n                <option value=\"model\">Model</option>\r\n                <option value=\"material\">Material</option>\r\n                <option value=\"submenu\">Submenu</option>\r\n              </select>\r\n            </label>\r\n\r\n            <label htmlFor=\"position\">\r\n              <span className=\"label\">Position:</span>\r\n\r\n              <input className=\"abasi-input\"\r\n                type=\"number\"\r\n                name=\"position\"\r\n                value={config.position}\r\n                onChange={this.handleChange}\r\n              />\r\n            </label>\r\n\r\n            <div className=\"flex columns abasi-selections\">\r\n              <h1>Configuration Line Items</h1>\r\n\r\n              <button className=\"btn abasi-add-line-item\" type=\"button\" onClick={this.addLineItem}>\r\n                Add New Line Item\r\n              </button>\r\n\r\n              <div className=\"flex columns lineitems\">\r\n                { lineitems }\r\n              </div>\r\n            </div>\r\n\r\n            <button type=\"submit\" className=\"btn abasi-add-button\">\r\n              Save Configuration Item\r\n            </button>\r\n          </div>\r\n        </form>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nAddConfiguration.propTypes = {\r\n  match: PropTypes.object,\r\n};\r\n\r\nexport default AddConfiguration;\r\n","import React from 'react';\r\nimport { RadialChart } from 'react-vis';\r\n\r\nconst Chart = (props) => {\r\n  return (\r\n    <RadialChart\r\n      data={props.data}\r\n      width={300}\r\n      height={300}\r\n    />\r\n  );\r\n}\r\nexport default Chart;","import React from 'react';\r\nimport { ClipLoader } from 'react-spinners';\r\nimport Chart from './Chart'\r\nimport OrderService from '../../services/OrderService';\r\n\r\nclass Statistics extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    this.state = {\r\n      loading: true,\r\n      orders: undefined,\r\n    };\r\n  }\r\n\r\n  async componentDidMount() {\r\n    const orders = await OrderService.getAll();\r\n    \r\n    console.log(orders);\r\n\r\n    this.setState({\r\n      orders,\r\n      loading: false,\r\n    });\r\n  }\r\n  \r\n  render() {\r\n    const { loading, orders } = this.state;\r\n\r\n    if (loading) {\r\n      return (\r\n        <div className=\"abasi-stats flex columns\">\r\n          <ClipLoader />\r\n          <p>Loading orders...</p>\r\n        </div>\r\n      )\r\n    }\r\n\r\n    return (\r\n      <div className=\"abasi-stats flex columns\">\r\n        <h1>Abasi Order Statistics</h1>\r\n\r\n        <Chart data={orders}/>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Statistics;\r\n","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport { Route, Switch } from 'react-router-dom';\r\n\r\nimport Home from './Home';\r\nimport Orders from './Orders';\r\nimport OrderListing from './OrderListing';\r\nimport ManageAssets from './ManageAssets';\r\nimport ManageConfiguration from './ManageConfiguration';\r\nimport AddConfiguration from './AddConfiguration';\r\nimport Statistics from './Statistics';\r\n\r\nconst Dashboard = ({ user }) => (\r\n  <div className=\"flex\">\r\n    <Switch>\r\n      <Route exact path=\"/\" component={Home} />\r\n      <Route exact path=\"/orders\" component={Orders} />\r\n      <Route exact path=\"/orders/:id\" component={OrderListing} />\r\n      <Route exact path=\"/assets\" component={ManageAssets} />\r\n      <Route exact path=\"/config\" component={ManageConfiguration} />\r\n      <Route exact path=\"/add-config\" component={AddConfiguration} />\r\n      <Route exact path=\"/edit-config/:id\" component={AddConfiguration} />\r\n      <Route exact path=\"/statistics\" component={Statistics} />\r\n    </Switch>\r\n  </div>\r\n);\r\n\r\nDashboard.propTypes = {\r\n  user: PropTypes.object.isRequired,\r\n};\r\n\r\nexport default Dashboard;","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport Configurator from './Configurator';\r\nimport { ToastContainer } from 'react-toastify';\r\nimport 'react-toastify/dist/ReactToastify.css';\r\nimport {\r\n  BrowserRouter as Router, Route, Switch, withRouter,\r\n} from 'react-router-dom';\r\nimport { connect } from 'react-redux';\r\n\r\n// App Components\r\nimport Header from './Header';\r\nimport Sidebar from './Sidebar';\r\nimport Welcome from './Welcome';\r\nimport Dashboard from './dashboard/Dashboard';\r\n\r\n// Styles\r\nimport '../styles/app.css';\r\n\r\n// Redux actions\r\nimport * as actions from '../actions/auth';\r\n\r\nconst App = ({\r\n  user,\r\n}) => {\r\n  const localUser = localStorage.getItem('user');\r\n  const authedUser = user || JSON.parse(localUser);\r\n  actions.initUser();\r\n\r\n  user = user || authedUser;\r\n\r\n  return (\r\n    <Router>\r\n      <div id=\"app-container\" className=\"flex columns\">\r\n        {/* Notification Container */}\r\n        <ToastContainer\r\n          className='toast-container'\r\n          toastClassName=\"dark-toast\"\r\n          progressClassName='toast-progress'\r\n          position=\"bottom-center\"\r\n        />\r\n\r\n        <Header user={user} />\r\n\r\n        { user &&\r\n          <Sidebar />\r\n        }\r\n\r\n        <div className=\"flex app-body\">\r\n          {!user &&\r\n            <Welcome />\r\n          }\r\n\r\n          {user &&\r\n            <Switch>\r\n              <Route exact path=\"/embed\" component={Configurator} />\r\n              <Route path=\"/\" render={props => <Dashboard {...props} user={user} />} />\r\n            </Switch>\r\n          }\r\n        </div>\r\n      </div>\r\n    </Router>\r\n  );\r\n};\r\n\r\nApp.propTypes = {\r\n  user: PropTypes.object,\r\n};\r\n\r\nconst mapStateToProps = state => ({\r\n  user: state.user,\r\n});\r\n\r\nexport default withRouter(connect(\r\n  mapStateToProps,\r\n  actions,\r\n)(App));\r\n","// In production, we register a service worker to serve assets from local cache.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\r\n// cached resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\r\n// This link also includes instructions on opting out of this behavior.\r\n\r\nconst isLocalhost = Boolean(window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.1/8 is considered localhost for IPv4.\r\n    window.location.hostname.match(/^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/,),);\r\n\r\nexport default function register() {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Lets check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log('This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://goo.gl/SC7cgQ',);\r\n        });\r\n      } else {\r\n        // Is not local host. Just register service worker\r\n        registerValidSW(swUrl);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then((registration) => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the old content will have been purged and\r\n              // the fresh content will have been added to the cache.\r\n              // It's the perfect time to display a \"New content is\r\n              // available; please refresh.\" message in your web app.\r\n              console.log('New content is available; please refresh.');\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch((error) => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl)\r\n    .then((response) => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      if (\r\n        response.status === 404 ||\r\n        response.headers.get('content-type').indexOf('javascript') === -1\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then((registration) => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log('No internet connection found. App is running in offline mode.',);\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then((registration) => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react';\r\nimport { render } from 'react-dom';\r\nimport { Provider } from 'react-redux';\r\nimport { createStore, applyMiddleware } from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport { BrowserRouter } from 'react-router-dom';\r\nimport rootReducer from './reducers';\r\nimport App from './components/App';\r\nimport './styles/app.css';\r\nimport './firebase'; // initialize firebase\r\nimport registerServiceWorker from './registerServiceWorker';\r\n\r\nconst store = createStore(rootReducer, {}, applyMiddleware(thunk));\r\nregisterServiceWorker();\r\n\r\nrender(\r\n  <Provider store={store}>\r\n    <BrowserRouter>\r\n      <App />\r\n    </BrowserRouter>\r\n  </Provider>,\r\n  document.getElementById('root'),\r\n);\r\n"],"sourceRoot":""}